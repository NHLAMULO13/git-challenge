(()=>{var e={926:e=>{function t(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)}))}}},757:(e,t,n)=>{e.exports=n(205)},205:function(e,t,n){var r="object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:this,i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(666),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},666:function(e,t,n){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",d=t.regeneratorRuntime;if(d)e.exports=d;else{(d=t.regeneratorRuntime=e.exports).wrap=v;var c="suspendedStart",u="suspendedYield",p="executing",g="completed",f={},m={};m[a]=function(){return this};var h=Object.getPrototypeOf,y=h&&h(h(L([])));y&&y!==r&&i.call(y,a)&&(m=y);var b=S.prototype=E.prototype=Object.create(m);T.prototype=b.constructor=S,S.constructor=T,S[l]=T.displayName="GeneratorFunction",d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(b),e},d.awrap=function(e){return{__await:e}},A(I.prototype),I.prototype[s]=function(){return this},d.AsyncIterator=I,d.async=function(e,t,n,r){var i=new I(v(e,t,n,r));return d.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(b),b[l]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},d.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},d.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),d=i.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),f}}}function v(e,t,n,r){var i=t&&t.prototype instanceof E?t:E,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=c;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=w(e,t,n);if("normal"===l.type){if(r=n.done?g:u,l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=g,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function E(){}function T(){}function S(){}function A(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function n(t,r,o,a){var s=w(e[t],e,r);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&i.call(d,"__await")?Promise.resolve(d.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):Promise.resolve(d).then((function(e){l.value=e,o(l)}),a)}a(s.arg)}var r;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function i(){return new Promise((function(r,i){n(e,t,r,i)}))}return r=r?r.then(i,i):i()}}function _(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,_(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:n,done:!0}}}("object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{GAMThirdPartyClaim:()=>Dt,PermutiveThirdPartyClaim:()=>St});var t=n(757),r=n.n(t),i=n(926),o=n.n(i),a=function(){return new Promise((function(e,t){window.__tcfapi("addEventListener",2,(function(n,r){if(!r)return t(new Error("IM Consent | There was an error retrieving data from TCFAPI"));var i=["useractioncomplete","tcloaded"].includes(n.eventStatus),o="cmpuishown"===n.eventStatus,a=0===Object.keys(n.purpose.consents).length;i?e(!0):o&&a&&e(!1)}))}))};function s(){return l.apply(this,arguments)}function l(){return(l=o()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",console.error("IM Consent: There was an error retrieving hasConsentData",{msg:{error:e.t0.message}}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var d=function(){var e;return window.__tcfapi("getTCData",2,(function(t,n){n&&(e=JSON.stringify(t.purpose.consents))})),e},c={},u=function(e){window.performance.mark("time-to-getSourcePointCustomVendors-init"),c.sourcePointVendors=e.consentedVendors},p=function(e){window.performance.mark("time-to-setConsentedPurposes-init"),c.consentedPurposes=e.consentedPurposes},g=function(e){return e.every((function(e){return c.sourcePointVendors.some((function(t){return t._id===e}))}))},f=function(e){return e.every((function(e){var t;return null===(t=c.consentedPurposes)||void 0===t?void 0:t.find((function(t){return t.name===e}))}))},m=function(e,t,n,r){var i,o,a;return o="time-to-checkPurposes-init",a=window.performance.getEntriesByName(o,"mark").some((function(e){return e.name===o})),a||window.performance.mark(o),window.__tcfapi("addEventListener",2,(function(o,a){var s=o.purpose,l=o.vendor,d=o.eventStatus;if(n&&window.__tcfapi("getCustomVendorConsents",2,u),r&&window.__tcfapi("getCustomVendorConsents",2,p),a&&["useractioncomplete","tcloaded"].includes(d)){c.siteConsents=s.consents,c.vendorConsents=l.consents;var m=[!e||e.every((function(e){return c.siteConsents[e]})),!t||t.every((function(e){return c.vendorConsents[e]})),!n||g(n),!r||f(r)];i=m.every((function(e){return e}))}return i})),i};"undefined"!=typeof window&&(window.consentCheckerEventData={},function(){if(window.__tcfapi){var e;document.addEventListener("DOMContentLoaded",(function(){return e=new CustomEvent("consent-checker.listener-events-before-reload",{detail:{hasKeySignalled:{}}}),void window.dispatchEvent(e);var e}));var t=function(t,n){e?n&&"useractioncomplete"===t.eventStatus&&e!==t.tcString&&new Promise((function(e){var t=window.consentCheckerEventData,n=0===Object.keys(t).length,r=Object.values(t).every((function(e){return!0===e}));e(!n&&r)})).then((function(e){e&&window.location.reload()})):e=t.tcString},n=function(t,n){n&&"tcloaded"===t.eventStatus&&(e=t.tcString)},r=document.querySelector("[data-cmp='true']");try{r.addEventListener("click",(function(){window.__tcfapi("addEventListener",2,t),window.__tcfapi("addEventListener",2,n)}))}catch(e){}}}());var h=function(e){var t;null!==(t=window.performance)&&void 0!==t&&t.mark&&window.performance.mark(e)},y=function(){var e,t;null!==(e=window.performance)&&void 0!==e&&e.measure&&(t=window.performance).measure.apply(t,arguments)};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=v(v({},console),{},{withName:function(){return console},withMeta:function(){return console}}),T=function(e){return"undefined"==typeof Proxy?E:new Proxy({},function(e){return{get:function(t,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];window.IM=window.IM||{},window.IM.logger=window.IM.logger||{queue:[]},t[n]?t[n].apply(t,i):window.IM.logger.queue.push((function(){var r=window.IM.logger.withName(e);Object.assign(t,r),r[n].apply(r,i)}))}}}}(e))};const S=T("Permutive | ");var A={AFFINITYCOHORTS:{API:function(e){return"https://api.permutive.com/ctx/v1/segment?k=".concat(e)},ERROR_MESSAGE:"Affinity Cohorts did not return ok"},CLIENTDATA:{url:"undefined"!=typeof document?document.URL:"",referrer:"undefined"!=typeof document?document.referrer:"",type:"web",user_agent:"undefined"!=typeof navigator?navigator.userAgent:"",domain:"undefined"!=typeof window?window.location.hostname:"",title:"undefined"!=typeof document?document.title:""},MONITORING:{INIT:"permutive-affinity-cohorts-init",API_REQUESTED:"permutive-affinity-cohorts-api-requested",API_RETURNED:"permutive-affinity-cohorts-api-returned",API_REQUEST_COMPLETE:"permutive-affinity-cohorts-time-to-api-return",SET_TARGETING:"permutive-affinity-cohorts-set-targeting",TIME_TO_SET_TARGETING:"permutive-affinity-cohorts-time-to-set-targeting",TIME_TO_COMPLETE:"permutive-affinity-cohorts-time-to-complete"}};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}const C=function(e){try{var t={client:A.CLIENTDATA};return"object"!==O(e)||Array.isArray(e)?t:_(_({},e),t)}catch(e){return null}},L=T("stitcher | ad manager"),P=e=>{try{return e?.getSlotElementId?.()||e?.id}catch(e){L.error(`{error: ${e.message}}, {key}: permutive | identityGUIDs}`)}return null},x=JSON.parse('{"id":65,"unitBase":"/176986657/bbcgoodfood.com","environment":null,"name":"bbcgoodfood","adLabelTextSiteDefault":"Ad","documentId":"osa4iqbmnz4vser5rntahv42","permutive":{"id":3,"permutive_affinity_cohorts":true,"permutive_id":"99db7a95-b06a-4ea9-857c-f73ba0a25c19"},"refresh":[{"enabled":true,"excludedIds":"476475177,2740501331,3591879594,3581948765,3538387618,3763173282","uir":null,"consentlessRefresh":true,"deviceSettings":{"mobile":{"refreshTimer":30,"inViewPercentage":50},"tablet":{"refreshTimer":30,"inViewPercentage":50},"desktop":{"refreshTimer":30,"inViewPercentage":50}}}],"manageConsentlessInventory":{"useConsentlessInventory":false,"npa":false},"audienceProject":{"id":2,"fullreach_enabled":true,"fullreach_customerid":"sakimm"},"thirdPartyClaims":null,"strapiStage":null,"strapiAssignee":null,"adSlots":{"default--banner--1":{"pos":"leader1,top,banner_leader,mma","label":"banner--1","index":"1","sizes":[[[970,50],[[970,251],[970,250],[728,90],"fluid"]],[[768,50],[[728,90],"fluid"]],[[0,0],[[320,50],[320,51],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"banner"},"default--banner--2":{"pos":"leader2,mid","label":"banner--2","index":"2","sizes":[[[970,250],[[970,252],[970,250],"fluid"]],[[728,90],[[728,92],[728,90],"fluid"]],[[0,0],[[300,252],[300,250],[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"banner"},"default--banner--3":{"pos":"leader3,bottom","label":"banner--3","index":"3","sizes":[[[970,250],[[970,252],[970,250],"fluid"]],[[728,90],[[728,92],[728,90],"fluid"]],[[0,0],[[300,252],[300,250],[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"banner"},"default--oop--1":{"pos":"","label":"oop--1","index":"1","sizes":[[[0,0],[[1,1]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"oop"},"default--inline--1":{"pos":"top,mma","label":"inline--1","index":"1","sizes":[[[970,250],[]],[[728,90],[]],[[0,0],[[300,251],[300,250],"fluid"]]],"showDisclaimer":true,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline"},"default--inline--2":{"pos":"outstream","label":"inline--2","index":"2","sizes":[[[970,250],[[300,252],[300,250],"fluid"]],[[728,90],[[300,252],[300,250],"fluid"]],[[0,0],[[300,252],[300,250],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline"},"default--inline--3":{"pos":"bottom","label":"inline--3","index":"3","sizes":[[[970,250],[]],[[728,90],[]],[[0,0],[[300,600],[300,253],[300,250],"fluid"]]],"showDisclaimer":true,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline"},"default--inline--4":{"pos":"bottom","label":"inline--4","index":"4","sizes":[[[970,250],[]],[[728,90],[]],[[0,0],[[300,600],[300,253],[300,250],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline"},"default--inline--default":{"pos":"","label":"inline-dynamic--default","index":"default","sizes":[[[970,250],[[300,255],[300,250]]],[[728,90],[[300,255],[300,250]]],[[0,0],[[300,600],[300,605],[300,255],[300,250],"fluid"]]],"showDisclaimer":true,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline"},"default--gallery--1":{"pos":"mid,gallery_mid","label":"gallery--1","index":"1","sizes":[[[300,251],[[300,250]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{"modifier":"gallery"},"key":"gallery"},"default--mpu--1":{"pos":"top","label":"mpu--1","index":"1","sizes":[[[960,400],[[300,601],[300,600],[300,251],[300,250],"fluid"]],[[768,50],[[300,601],[300,600],[300,251],[300,250],"fluid"]],[[0,0],[]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{"sidebarPosition":"sidebarTop","deviceTypes":"[\\"desktop\\", \\"tablet\\"]"},"key":"mpu"},"default--mpu--2":{"pos":"mid","label":"mpu--2","index":"2","sizes":[[[960,400],[[300,602],[300,600],[300,252],[300,250],"fluid"]],[[768,50],[[300,602],[300,600],[300,252],[300,250],"fluid"]],[[0,0],[]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{"deviceTypes":"[\\"desktop\\", \\"tablet\\"]","sidebarPosition":"sidebarMid"},"key":"mpu"},"default--mpu--3":{"pos":"bottom","label":"mpu--3","index":"3","sizes":[[[960,400],[[300,603],[300,600],[300,253],[300,250],"fluid"]],[[768,50],[[300,603],[300,600],[300,253],[300,250],"fluid"]],[[0,0],[]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{"deviceTypes":"[\\"desktop\\", \\"tablet\\"]","sidebarPosition":"sidebarBottom"},"key":"mpu"},"default--card--default":{"pos":"nova","label":"card--1","index":"default","sizes":[[[0,0],[[5,5]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"card"},"default--inline-accordion--default":{"pos":"","label":"inline-accordion--default","index":"default","sizes":[[[0,0],[[300,255],[300,250],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline-accordion"},"search--inline-grid--1":{"pos":"top,search_top,inline1","label":"inline-grid--1","index":"1","sizes":[[[970,250],[[970,251],[970,250],"fluid"]],[[728,90],[[728,91],[728,90],"fluid"]],[[0,0],[[300,251],[300,250],[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline-grid"},"search--inline-grid--2":{"pos":"mid,search_mid,inline2","label":"inline-grid--2","index":"2","sizes":[[[970,250],[[970,252],[970,250],"fluid"]],[[728,90],[[728,92],[728,90],"fluid"]],[[0,0],[[300,252],[300,250],[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline-grid"},"search--inline-grid--3":{"pos":"bottom,search_bottom,inline3","label":"inline-grid--default","index":"3","sizes":[[[970,250],[[970,253],[970,250],"fluid"]],[[728,90],[[728,93],[728,90],"fluid"]],[[0,0],[[300,253],[300,250],[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline-grid"},"search--inline-list--1":{"pos":"mid,search_mid,dai","label":"inline-list--1","index":"1","sizes":[[[970,250],[[300,255],[300,250]]],[[728,90],[[300,255],[300,250]]],[[0,0],[[300,600],[300,605],[300,255],[300,250],"fluid"]]],"showDisclaimer":true,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline-list"},"search--inline-list--2":{"pos":"bottom,search_bottom,dai","label":"inline-list--2","index":"2","sizes":[[[970,250],[[300,255],[300,250]]],[[728,90],[[300,255],[300,250]]],[[0,0],[[300,600],[300,605],[300,255],[300,250],"fluid"]]],"showDisclaimer":true,"enableDynamicHeightReservation":false,"keyValuePair":{"deviceTypes":"[\\"mobile\\"]"},"key":"inline-list"},"default--vertical-gallery--default":{"pos":"","label":"vertical-gallery--default","index":"default","sizes":[[[0,0],[[336,280]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"vertical-gallery"},"page--block-banner--1":{"pos":"mma","label":"block-banner--1","index":"1","sizes":[[[960,400],[[970,250],[970,252],[728,90],"fluid"]],[[0,0],[[300,50],[320,50],[300,250],[300,251],[300,600]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"block-banner"},"page--block-banner--2":{"pos":"","label":"block-banner--2","index":"2","sizes":[[[960,400],[[970,250],[970,253],[728,90],"fluid"]],[[0,0],[[300,50],[320,50],[300,250],[300,252],[300,600]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"block-banner"},"page--block-banner--3":{"pos":"","label":"block-banner--3","index":"3","sizes":[[[960,400],[[970,250],[970,254],[728,90],"fluid"]],[[0,0],[[300,50],[320,50],[300,250],[300,253],[300,600]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"block-banner"},"page--block-banner--default":{"pos":"","label":"block-banner--default","index":"default","sizes":[[[960,400],[[970,250],[728,90],"fluid"]],[[0,0],[[300,600],[300,605]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"block-banner"},"page--block-mpu--default":{"pos":"","label":"block-mpu--default","index":"default","sizes":[[[0,0],[[300,251],[300,250],[300,255],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"block-mpu"},"page--block-native--default":{"pos":"nova","label":"block-native--default","index":"default","sizes":[[[0,0],[[5,5],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"block-native"},"listings--inline-listings--default":{"pos":"","label":"inline-listings--default","index":"default","sizes":[[[970,50],[[970,250],[728,90],"fluid"]],[[768,50],[[728,90],"fluid"]],[[0,0],[[300,600],[300,605],[300,255],[300,250],"fluid"]]],"showDisclaimer":true,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"inline-listings"},"listings--quick-view--1":{"pos":"video-listings,schedule_details_banner_top","label":"quick-view--1","index":"1","sizes":[[[970,50],[[300,251],[300,250],"fluid"]],[[768,50],[[300,251],[300,250],"fluid"]],[[0,0],[[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"quick-view"},"listings--default--2":{"pos":"video-listings,schedule_details_banner_bottom","label":"quick-view--2","index":"2","sizes":[[[970,50],[[0,0]]],[[768,50],[[0,0]]],[[0,0],[[320,50],[300,50],"fluid"]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"default"},"listings--sponsored--1":{"pos":"schedule_sponsored","label":"sponsored--1","index":"1","sizes":[[[0,0],[[2,2]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"sponsored"},"recipe--below-ingredients--1":{"pos":"ing","label":"below-ingredients--1","index":"1","sizes":[[[970,50],[[468,60]]],[[728,50],[[320,50],[300,50]]],[[0,0],[[320,100],[320,50],[320,52],[300,50]]]],"showDisclaimer":false,"enableDynamicHeightReservation":false,"keyValuePair":{},"key":"below-ingredients"}},"dai":[[{"article":{"mobile":{"mpu3To5":1000,"mpu6Plus":2001,"maxAds":10,"lazyFetching":{"id":3,"viewport_height_percentage":100}}}}],[{"recipe":{"mobile":{"mpu2Lvl1":1050,"mpu2Lvl2":750,"mpu2Lvl3":450,"mpu3":1450,"lazyFetching":{"id":4,"viewport_height_percentage":25}}}}],[{"list":{"mobile":{"cardSpacing":6,"lazyFetching":{"id":7,"viewport_height_percentage":25}}}}],[{"glossary":{"mobile":{"lazyFetching":{"id":10,"viewport_height_percentage":100},"mpuCharacterCount":{"id":3,"mpuCharacterLimit":1000},"maxAds":10}}}],[{"search":{"mobile":{"listCardSpacing":6,"gridCardSpacing":null,"lazyFetching":{"id":9,"viewport_height_percentage":25}}}}]],"lazyRendering":{"enabled":false,"renderMarginPercent":100,"mobileScaling":null},"prebid":{"active":true,"timeout":1800,"amazonTam":true}}'),k=e=>x[e],D=(e,t,n)=>{const r=x[e].flat().find((e=>Object.hasOwn(e,t)))?.[t];if(void 0!==r)return r[n]},N=(e,t)=>{if(!x[e][0])return{enabled:!1,excludedIds:void 0,uir:void 0,refreshTimer:void 0,inViewPercentage:void 0,consentlessRefresh:void 0,deviceSettings:{}};const{enabled:n,excludedIds:r,uir:i,consentlessRefresh:o,deviceSettings:{[t]:{refreshTimer:a,inViewPercentage:s}={}}}=x[e][0]||{};return{enabled:n,excludedIds:r,uir:i,refreshTimer:a,inViewPercentage:s,consentlessRefresh:o}},j=()=>(window.IM=window.IM||{},window.IM.advertising=window.IM.advertising||{},window.IM.advertising),$=e=>{const t=j();e&&Object.assign(t,e)},M=e=>(j()[e]||$({[e]:null}),j()[e]),U=(e,t)=>{$({[e]:t})},G=()=>{try{return JSON.parse(JSON.stringify(window.IM?.advertising||{}))}catch(e){return L.warn(`Unable to get Global state, \n    {error: ${e.message}}, \n    {ad-service: stitcher | debug}`),null}},z=(e,{slot:t,slots:n,...r}={})=>{const i={globalState:G(),date:(new Date).toLocaleString(),...r};n&&(i.slotIds=(e=>(Array.isArray(e)?e:[e]).map(P).filter((e=>e)))(n)),t&&(i.slotId=P(t)),L.debug(e,i)},V=e=>!!/[?&]stitch_debug=true/.test(e)&&(U("debug",!0),!0),F=()=>!!k("prebid")?.amazonTam;var q=function(e){try{return JSON.parse(e)}catch(e){}return null};const H=e=>t=>{if(!e)return;const[n,...r]=t.split(".");0!==r.length?H(e[n])(r.join(".")):delete e[n]},B=e=>"[object Object]"===Object.prototype.toString.call(e),X=(e,t)=>{if(!B(e)||!B(t))return t;const n={...e};return Object.keys(t).forEach((r=>{"object"==typeof t[r]?n[r]=X(e[r]||{},t[r]):n[r]=t[r]})),n};let Y=null;const J=()=>Y,K=()=>{const e=J(),t=(n=["adSettings","pageInfo"],document.body&&n?((Array.isArray(n)?n:[n]).some((function(e){return r=function(e){var t=document.body.dataset[e];if(t)return q(t);var n="__".concat(e.trim().replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),"__"),r=document.getElementById(n);return r?q(r.innerHTML):null}(e),!!r})),r):null);var n,r;return e||t},W=(e,t)=>{!function n(r){if(r<=0)return void t(new Error("Ads could not get globalSettings, globalSettings not retrieved after 10 attempts"));const i=K();((e,t)=>{return!!e&&t.every((n=e,e=>{const t=e.split(".");let r=n;for(let e=0;e<t.length;e+=1){if(r&&!Object.hasOwnProperty.call(r,t[e]))return!1;r=r[t[e]]}return!0}));var n})(i,e)?t(null,i):(L.error(`globalSettings invalid, expected paths: ${e.join(", ")}`),setTimeout((()=>{n(r-1)}),200))}(10)},Q={ROUTE:`https://${window.location.host}/auth/stitcher-user-guids`,ERROR_MESSAGE:"Error retrieving or processing Stitcher GUIDs",LOGGEDIN_COOKIE_NAME:"IMOLOGIN",LOCALSTORAGE_KEY:"stitcher_user_guids"},Z={APIKEY:K()?.permutiveConfig?.permutiveApiKey,PAGEDATA:K()?.permutiveConfig?.permutiveModel,PROJECT_ID:k("permutive")?.permutive_id,USEAFFINITYCOHORTS:k("permutive")?.permutive_affinity_cohorts},ee={DEFAULT:["oop","sponsored--1"],FROM_CONFIG:[""],LEVEL_TARGETED:{PAGE:{KEY:"block-refresh",VALUE:"page"},SLOT:{KEY:"block-refresh",VALUE:"true"}}},te={KEY:"ad-refresh",VALUE:"true"},ne={prebid:!0,...F()&&{aps:!0}},re="prebid",ie={DEBUG_PREFIX:"AudienceProject | ",EXCLUDE_ON_PAGES:{AUTH:["/account","/user","/registration","/login","password","/log-out","/logout"]},FULLREACH_CUSTOMERID:k("audienceProject")?.fullreach_customerid,FULLREACH_ENABLED:k("audienceProject")?.fullreach_enabled,FULLREACH_SPEEDCURVE:{API_FAIL:"ap-fullreach-api-fail",API_REQUEST_COMPLETE:"ap-fullreach-time-to-api-return",API_REQUESTED:"ap-fullreach-api-requested",API_SUCCESS:"ap-fullreach-api-success",INIT:"ap-fullreach-init",SET_TARGETING:"ap-fullreach-set-targeting",TARGETING_ABSENT:"ap-fullreach-targeting-absent",TARGETING_CONTEXT:"ap-fullreach-targeting-context",TARGETING_PERSONALISED:"ap-fullreach-targeting-personalised",TIME_TO_COMPLETE:"ap-fullreach-time-to-complete",TIME_TO_SET_TARGETING:"ap-fullreach-time-to-set-targeting",TIME_TO_TARGETING_ABSENT:"ap-fullreach-time-to-targeting-absent",TIME_TO_TARGETING_CONTEXT:"ap-fullreach-time-to-targeting-context",TIME_TO_TARGETING_PERSONALISED:"ap-fullreach-time-to-targeting-personalised"}},oe=({state:e,service:t,message:n,data:r})=>{U("AudienceProject",{...M("AudienceProject"),[t]:{state:e}}),z(ie.DEBUG_PREFIX+n,r)},ae=()=>{const e=window.location.pathname;return Object.values(ie.EXCLUDE_ON_PAGES).some((t=>t.some((t=>e.includes(t)))))},se=()=>{window._urq=window._urq||[],Object.freeze(window._urq)},le="1.4.0",de={},ce={state:"INITIAL"},ue=(e,t,n)=>{if("string"!=typeof e||!e)throw new Error("Invalid customer ID");const r={allowStorageAccess:!0,allowPersonalisation:!0,gdprApplies:null,consentString:"",integrateWithCmp:!1,waitForCmpConsent:!1,requestParams:{},timeout:1e3,addStatusKey:!1,cacheType:"",cacheKey:"url,allowPersonalisation,requestParams",cacheTime:86400,requestDomains:{regular:"pdw-usr.userreport.com",nonPersonalised:"dnt-userreport.com"},debug:!1,...t,...(()=>{const e="__audienceProjectDataFetchOptions=";let t;return window.location.search.split(/[?&]/).some((n=>{const r=0===n.indexOf(e);if(r){const r=n.slice(e.length);try{t=JSON.parse(decodeURIComponent(r))}catch(e){}}return r})),t})()},i=(...e)=>r.debug&&console?.log("[AudienceProjectData]",...e);i("Fetch called…"),i("Version:",le),i("Customer ID:",e),i("Customer options:",t),i("Fetch options:",r);const o=e=>{try{return JSON.parse(e)}catch(e){return}},a=()=>(e=>{let t=0;const{length:n}=e;for(let r=0;r<n;r+=1)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t})(r.cacheKey.split(/\s*,\s*/).sort().map((e=>{if("url"===e)return window.location.pathname.slice(1)+window.location.search;if("allowPersonalisation"===e)return r.allowPersonalisation?"":0;if("requestParams"===e){const e=JSON.stringify(r.requestParams);return"{}"===e?"":e}return""})).join("")),s=localStorage,l="apr_sref",d="apr_data_cache",c=e=>{if(!r.allowStorageAccess)return;let t;try{t=s[e]}catch(e){}return t&&0===t.indexOf("{")&&t.lastIndexOf("}")===t.length-1?o(t):t},u=(e,t)=>{if(!r.allowStorageAccess)return;const n="object"==typeof t?JSON.stringify(t):t;try{s[e]=n}catch(e){}};let p;const g=Math.round((new Date).getTime()/1e3),f=()=>"localStorage"!==r.cacheType||(()=>{if(!r.allowStorageAccess)return!1;const e=`apr_check_access@${Math.random()}`;try{s[e]=e;const t=s[e]===e;return delete s[e],t}catch(e){}return!1})()?r.cacheType:"memory",m=new XMLHttpRequest,h=[];return"function"==typeof n&&h.push(n),(()=>{let t;ce.state="RUNNING",delete ce.result,delete ce.options;let n=!1;const s=(e,o)=>{if(n)return;n=!0,((e,t)=>{r.addStatusKey&&(i("Updating status fields…"),e.keyValues=e.keyValues||{},e.keyValues.ap_ds=String(t))})(e,o.code);const a={type:o.value,...e};ce.state=parseInt(o.code,10)>0?"READY":"FAILED",ce.result=a,ce.options=r,(e=>{clearTimeout(e);const t=(new Date).getTime()-p;i("Timeout ended:",t,"ms")})(t),m.abort(),i("Callback result:",a),h.forEach((e=>{e(a)}))};(e=>{if(!r.integrateWithCmp)return void e();if(i("Checking CMP…"),"function"!=typeof __tcfapi)return void i("No TCF 2.2 API found…");i("Using TCF 2.2 API…");const t=(e,t)=>{__tcfapi(e,2,((...e)=>{i("TCF response:",...e),t(...e)}),[394])},n=(o,a)=>{a&&("tcloaded"!==o.eventStatus&&"useractioncomplete"!==o.eventStatus||(t("removeEventListener",n),(e=>{if(r.gdprApplies=Boolean(e.gdprApplies),r.consentString=e.tcString||"",r.gdprApplies){const t=e.vendor?.consents?.[394];r.allowStorageAccess=Boolean(t&&e.purpose?.consents?.[1]),r.allowPersonalisation=Boolean(t&&e.purpose?.consents?.[3])}i("Options after CMP override:",r)})(o),e()))};i("Adding TCF consent listener…"),t("addEventListener",n)})((()=>{const n={value:"TIMEOUT",code:-2},h={value:"BACKEND_ERROR",code:-1},y=r.allowPersonalisation?{value:"RETURNED",code:1}:{value:"RETURNED_ANONYMOUS",code:"1a"},b=r.allowPersonalisation?{value:"RETURNED_FROM_CACHE",code:2}:{value:"RETURNED_ANONYMOUS_FROM_CACHE",code:"2a"};return t=(e=>{if(r.timeout)return i("Timeout started…"),p=(new Date).getTime(),setTimeout((()=>{s({},n)}),r.timeout)})(),(()=>{if(!r.allowPersonalisation)return;i("Checking session referrer…");const e=`${window.location.protocol}//${window.location.host}/`;document.referrer&&0!==document.referrer.indexOf(e)&&(i("Session referrer updated:",document.referrer),u(l,document.referrer))})(),((e,t)=>{const n=f();if(!n)return t();let o;i("Reading prediction from cache…");const l=a();return"localStorage"===n?(i("Reading prediction from local storage key:",l),o=c(d)):"memory"===n&&(i("Reading prediction from memory key:",l),o=de[l]),"object"!=typeof o?t():o.ttl+r.cacheTime<g||o.hash!==l?(i("Cached prediction expired…"),t()):(i("Cached prediction:",o.data),u=o.data,void s(u,b));var u})(0,(()=>((t,n)=>{i("Reading prediction from API…");const a=["med",window.location.href];document.referrer&&a.push("ref",document.referrer);const s=c(l);if(s&&a.push("sref",s),r.allowPersonalisation){const e=c("apr_dsu");e&&a.push("dsu",e)}"boolean"==typeof r.gdprApplies&&a.push("gdpr",Number(r.gdprApplies)),r.consentString&&a.push("gdpr_consent",r.consentString),a.push("appid",`@audienceproject/data-web:${le}`),function e(t,n){Object.keys(t).forEach((r=>{const i=t[r];if(void 0===i)return;const o=n+r;var s;s=i,"[object Array]"===Object.prototype.toString.call(s)?i.forEach((e=>{a.push(o,e)})):"object"==typeof i?e(i,`${o}_`):a.push(o,i)}))}(r.requestParams,"");let d=`https://${r.allowPersonalisation?r.requestDomains.regular:r.requestDomains.nonPersonalised}/api/v2/partner/${encodeURIComponent(e)}/uid`;return a.forEach(((e,t)=>{d+=(t%2?"=":t?"&":"?")+encodeURIComponent(e)})),((e,t,n)=>{i("API request:",e),m.onreadystatechange=()=>{if(m.readyState===XMLHttpRequest.DONE)if(200===m.status){const e=o(m.responseText);i("API response:",e),t(e)}else i("API failed with code:",m.status),n()},m.open("GET",e,!0),m.withCredentials=r.allowPersonalisation,m.send()})(d,t,n)})((e=>{(e=>{const t=f();if(!t)return;i("Saving prediction to cache…");const n=a(),r={data:e,ttl:g,hash:n};"localStorage"===t?u(d,r):"memory"===t&&(de[n]=r)})(e),s(e,y)}),(()=>{s({},h)}))))}))})(),{promise:()=>new Promise((e=>{i("Promise called…"),h.push(e)}))}},pe=e=>{window.googletag=window.googletag||{cmd:[]};const t=()=>{Object.keys(e.keyValues).forEach((t=>{window.googletag.pubads().setTargeting(t,e.keyValues[t])}))};window.googletag.cmd.unshift?window.googletag.cmd.unshift(t):window.googletag.cmd.push(t)},{FULLREACH_CUSTOMERID:ge,FULLREACH_SPEEDCURVE:fe}=ie,me=e=>(h(fe.API_SUCCESS),y(fe.API_REQUEST_COMPLETE,fe.API_REQUESTED,fe.API_SUCCESS),e&&(e.keyValues||e.ap)?(e.keyValues&&e.ap&&(h(fe.TARGETING_PERSONALISED),y(fe.TIME_TO_TARGETING_PERSONALISED,fe.INIT,fe.TARGETING_PERSONALISED),oe({service:"FullReach",state:"enabled",message:"AudienceProjectData.fetch returned personalised targeting"})),e.keyValues&&!e.ap&&(h(fe.TARGETING_CONTEXT),y(fe.TIME_TO_TARGETING_CONTEXT,fe.INIT,fe.TARGETING_CONTEXT),oe({service:"FullReach",state:"enabled",message:"AudienceProjectData.fetch returned anonymous contextual targeting"})),oe({service:"FullReach",state:"enabled",message:"AudienceProjectData.fetch successful, sending to GPT"}),pe(e),h(fe.SET_TARGETING),y(fe.TIME_TO_SET_TARGETING,fe.INIT,fe.SET_TARGETING),y(fe.TIME_TO_COMPLETE,fe.INIT,fe.SET_TARGETING),!0):(h(fe.TARGETING_ABSENT),y(fe.TIME_TO_TARGETING_ABSENT,fe.INIT,fe.TARGETING_ABSENT),y(fe.TIME_TO_COMPLETE,fe.INIT,fe.TARGETING_ABSENT),oe({service:"FullReach",state:"disabled",message:"AudienceProjectData.fetch returned no targeting data"}),!1)),he=()=>{h(fe.API_FAIL),y(fe.API_REQUEST_COMPLETE,fe.API_REQUESTED,fe.API_FAIL),y(fe.TIME_TO_COMPLETE,fe.INIT,fe.API_FAIL),oe({service:"FullReach",state:"disabled",message:"AudienceProjectData.fetch failed"})},ye="headerBidderTimeout",be=e=>{["interactive","complete"].includes(document.readyState)?e():document.addEventListener("readystatechange",(()=>{"interactive"===document.readyState&&e()}))},ve=e=>e.id.length?{id:e.id,targets:q(e.dataset.adtargets)||{},sizes:q(e.dataset.adsizes)||[],unitName:e.dataset.unitname}:(L.warn("An ad slot element is missing an id attribute"),{}),we=(e={desktop:970,tablet:768,mobile:0})=>{const t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);return Object.keys(e).find((n=>t>=e[n]))},Ee=()=>{try{return window.localStorage._psegs?JSON.parse(window.localStorage._psegs):[]}catch(e){return L.warn(`Error processing permutive segments for PreBid, \n    {error: ${e.message}, \n    {key}: permutive | prebid}`),[]}},Te=()=>1===performance?.getEntriesByName("time-to-cmp")?.length,Se=e=>!!Array.isArray(e)&&2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1]),Ae=e=>Array.isArray(e)&&2===e.length&&e.every((e=>"number"==typeof e)),Ie=e=>"fluid"===e,_e=e=>Array.isArray(e)&&0===e.length,Re=(e,t)=>e.map((e=>_e(e)?null:(e=>Ie(e)||Ae(e))(e)?((e,t)=>!Ae(e)||e[0]<=t)(e,t)?e:null:Re(e,t))).filter((e=>null!==e&&!_e(e))),Oe=e=>{const t=((e,t)=>{if(_e(e)||"string"==typeof e)return L.warn("DAI | sizes is not an valid array"),null;const n={desktop:{width:[960,970,992],nextDevice:"tablet"},tablet:{width:[728,768],nextDevice:"mobile"},mobile:{width:[0],nextDevice:null}},r=t=>{const i=n[t];if(!i)return null;const o=i?.width,a=e.filter((([e])=>o.includes(e?.[0])));return a[0]?.[1]?a[0][1]:i?.nextDevice?r(i.nextDevice):null};return r(t)})(e,we());return Array.isArray(t)?Math.max(...t.map((e=>!Ie(e)&&Ae(e)?e[1]:Oe(e)))):0},Ce=e=>""+(e>0?`min-height: ${e}px;`:""),Le=e=>googletag.pubads().getSlots().find((t=>e===t.getSlotElementId())),Pe=({id:e,isOutOfPageSlot:t,sizes:n})=>{const r=(e=>{return t=e,Array.isArray(t)&&(Se(t)||1===t.length&&"fluid"===t[0])||(e=>e.every((e=>Se(e)||"fluid"===e)))(e);var t})(n),i=r?n:[0,0],o=K().unitName,a=t?googletag.defineOutOfPageSlot(o,e):googletag.defineSlot(o,i,e);if(!a)throw new Error(`Failed to define slot for element with id "${e}"`);return r||((e,t)=>{const n=googletag.sizeMapping(),r=((e,t)=>e.filter((e=>{const n=2===e.length;return n||z("Incorrect size value(s) attempted to be passed in for creating ad sizes",{msg:{valuePassedIn:e,slotId:t}}),n})))(t,e.getSlotElementId());r.forEach((([e,t])=>n.addSize(e,t))),e.defineSizeMapping(n.build())})(a,n),a},xe=({id:e,sizes:t,targets:n})=>{const r=e.includes("oop"),i=((e,t)=>{const n=e||{};return t&&(n.pos=[""]),n})(n,r),o=document.getElementById(e);if((e=>{const t=Le(e);return!!t&&(z(`A slot with id ${e} is already defined`,{slot:t}),!0)})(e))return null;(e=>{if(!Array.isArray(e))throw new Error(`Attempted to register an ad slot with invalid sizes: ${e}`)})(t),z("Defining ad slot",{msg:{slotDefined:{id:e,sizes:t,targets:i,isOutOfPageSlot:r,adElement:o,currentWindowHeight:window.innerHeight}}});const a=Pe({id:e,isOutOfPageSlot:r,sizes:t});return a.addService(googletag.pubads()).updateTargetingFromMap(i),a},ke=(...e)=>e.filter((e=>null!=e)).join("--"),De=e=>t=>{const n=ke(e,t.key,t.index),r=((e,t,n)=>{const{adSlots:r}=x;if(r)return r[`${e}--${t}--${n}`]||r[`${e}--${t}--default`]||r[`default--${t}--${n}`]||r[`default--${t}--default`];L.error(`Cannot find config for ${e}--${t}--${n},\n      ad config file does not contain ad slots config`)})(e,t.key,t.index);return r?(!0===r?.enableDynamicHeightReservation&&r?.sizes.length>0&&((e,t)=>{const n=document.getElementById(t);e<=0||!n||n.setAttribute("style",Ce(e))})(Oe(r.sizes),n),t&&t?.searchTerm&&(r.keyValuePair.kw=`${t.searchTerm}`,r.keyValuePair.st=`${t.fullSearchTerm}`),{id:n,targets:(i=r.keyValuePair,o=r.pos,a=t.key,s=t.index,{...i,pos:o?[...o.split(","),ke(a,s)]:[ke(a,s)]}),sizes:r.sizes,showDisclaimer:Boolean(r?.showDisclaimer)}):(L.error(`No ad slot config found for key "${t.key}" (element id "${n}")`),null);var i,o,a,s},Ne=e=>Array.isArray(e)?e:[e],je="refreshState",$e=()=>M(je)||{},Me=e=>{U(je,e)},Ue=e=>{const t=P(e);return t&&$e()[t]||{}},Ge=(e,t)=>{const n=P(e);if(!n)return;const r={...Ue(e),...t};Me({...$e(),[n]:r})},ze=e=>{const t=Ne(e);if(!t||t.length<=0)return;const n=$e(),r=t.reduce(((e,t)=>{const n=P(t);return n?{...e,[n]:{}}:e}),{});Object.keys(r).length&&Me({...n,...r})},Ve=()=>{const e=M("refresh")?.refreshTimer;return 1e3*e},Fe=()=>{const e=M("refresh")?.uir;return 1e3*e},qe=()=>{const{inViewPercentage:e}=N("refresh",we());return e},He=e=>{const{campaignId:t}=Ue(e)||"";return!!(()=>{const e=N("refresh",we())?.excludedIds||"";return Array.isArray(e)?e:e.split(",").map((e=>{const t=Number(e.trim());return Number.isFinite(t)?t:null})).filter(Boolean)})().includes(t)&&(window.LUX.addData("ad-refresh-campaign-exclusion",1),!0)},Be=e=>{const t=e.getSlotElementId();if(!t)return!1;const n=t.split("--");if(3!==n.length)return!1;const[,r,i]=n,o=`${r}--${i}`;return!(!ee.DEFAULT.includes(r)&&!ee.DEFAULT.includes(o))},Xe=e=>{if(!e)return!1;const{KEY:t,VALUE:n}=ee.LEVEL_TARGETED.SLOT;return!!Le(e.getSlotElementId())?.getTargeting(t).includes(n)&&(window.LUX.addData("ad-refresh-slot-exclusion",1),!0)},Ye=()=>{const{KEY:e,VALUE:t}=ee.LEVEL_TARGETED.PAGE,n=window.googletag.pubads().getTargeting(e);return n.includes(t)&&window.LUX.addData("ad-refresh-page-exclusion",1),n.includes(t)},Je="refreshExclusions",Ke=e=>{const t=[...M(Je)||[]],n=e.getSlotElementId();if(t.includes(n))return!0;const r=Object.entries({isCampaignExcluded:He,isPositionExcluded:Be,isSlotLevelTargeted:Xe,isPageLevelTargeted:Ye}).filter((([,t])=>t(e))).map((([e])=>e));return!!r.length&&(z("Refresh | Excluding a slot from Ad Refresh",{msg:{slotId:n,exclusionReasons:r.join(", ")}}),(e=>{U(Je,new Set(e))})([...t,n]),!0)},We=(e,t)=>{const n=e[0],r=t[0];return r?.[0]*r?.[1]-n?.[0]*n?.[1]||r?.[0]-n?.[0]||r?.[1]-n?.[1]},Qe=e=>{const t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),r=e[0];return t>=r[0]&&n>=r[1]},Ze=(e=[])=>e.sort(We).find(Qe)?.[1]?.filter((e=>!Ie(e)));let et=[];const tt=()=>{const e=Object.keys(ne).reduce(((e,t)=>(e[t]=!1,e)),{});U("bids_back",e)},nt=(e,t)=>{U("bids_back",{...M("bids_back"),[e]:t}),et.push(e)},rt=e=>{var t,n;googletag.pubads().refresh(e),tt(),(e=>{if(!e||!Array.isArray(e))return;const{KEY:t,VALUE:n}=te;e.forEach((e=>{e.getTargeting(t).indexOf(n)>-1&&(y("time-to-ad-refreshed-processed","ad-refresh","pb_auction_end"),e.clearTargeting(t),z("Refresh | Cleared ad-refresh targeting for a slot",{msg:{slotClearedTargeting:e.getSlotElementId(),targetCleared:t}}))}))})(e),h("bids-allbids-back"),window.LUX.addData("all_bidders_back",(t=Object.keys(ne),n=et,t.sort(),n.sort(),JSON.stringify(t)===JSON.stringify(n))),et=[],z("Refresh | All refreshable slots were loaded/processed",{msg:{slotsRefreshed:e.map((e=>e.getSlotElementId())).join(", ")}})},it=(()=>{let e=!1;return t=>{e||(e=!0,[["auctionInit","pb_auction_init"],["auctionEnd","pb_auction_end"],["setTargeting","pb_set_targeting"],["requestBids","pb_request_bids"],["addAdUnits","pb_add_ad_units"]].forEach((([e,n])=>{t.onEvent(e,(()=>{performance.mark(n)}))})),[["beforeBidderHttp","before_bidder_http"],["bidRequested","bid_requested"],["bidResponse","bid_response"],["bidWon","bid_won"],["bidderError","bidder_error"],["bidderDone","bidder_done"]].forEach((([e,n])=>{switch(e){case"bidderError":t.onEvent(e,(({bidderRequest:e})=>{performance.mark(`pb_${e.bidderCode.toLowerCase()}_${n}`)}));break;case"bidResponse":t.onEvent(e,(({bidResponse:e})=>{performance.mark(`pb_${e.bidder.toLowerCase()}_${n}`)}));break;case"bidWon":t.onEvent(e,(({bidResponse:e})=>{performance.mark(`pb_${e.toLowerCase()}_${n}`)}));break;default:t.onEvent(e,(({bidderCode:e})=>{performance.mark(`pb_${e.toLowerCase()}_${n}`)}))}})))}})(),ot=(e,t)=>(n,r=0)=>{const i=(e=>e.transactionObject?.hbDestination?.values?.div||e.transactionObject?.divId||e.transactionObject?.hbInventory?.values?.name)(n);var o;o=i,window.pbjs&&(window.pbjs[`adserverCalled-${o}`]=!1),window.pbjs[`adserverCalled-${i}`]||(window.pbjs[`adserverCalled-${i}`]=!0,googletag.cmd.push((()=>{let o=Le(i);if(!o)try{o=xe(e),googletag.display(o),z("Auction | Prebid | An ad slot was not defined on Prebid callback",{msg:{slotId:i}})}catch(e){return void L.error("Ad slots | Unable to define and register initially undefined ad slots",{msg:{error:e}})}t.callbackInvoked(o),n?.adUnit?.code&&pbjs.setTargetingForGPTAsync([n.adUnit.code]),t.isLastCallback()&&(nt("prebid",!0),rt(t.getGptSlots()),z("Auction | All | Auctioning finished as Prebid is at last callback, requesting all Ad slots with Auction data",{msg:{auctionTimeoutReached:!1,auctionTimeoutValue:r,fallbackRefresh:!1}})),r&&t.isLastCallback()&&(window.dispatchEvent(new Event(ye)),z("Auction | All | Timeout has reached, and is at last callback, requesting refresh of all Ad slots with Auction data available",{msg:{auctionTimeoutReached:!0,auctionTimeoutValue:r,fallbackRefresh:!0}}))})))},at=e=>{const t=Ne(e),n=(e=>{const t=[];return{callbackInvoked:e=>{t.push(e)},isLastCallback:()=>t.length===e,getGptSlots:()=>t}})(t.length),r=k(re),i=t.map((e=>({hbInventory:{type:"AUPDivID",values:{name:e.id,adUnitCode:e.id}},hbSource:{type:"auction"},hbDestination:{type:"callback",values:{callback:ot(e,n)}}})));r?.active&&(e=>{window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.que.push((()=>{window.pbjs.ppi?(it(window.pbjs),window.pbjs.ppi.requestBids(e),z("Auction | Prebid | Auction requested",{msg:{slotsAuctioned:e}})):((e,t="")=>{const n=[];e.forEach((e=>{n.push(e?.hbInventory?.id)})),(e=>{rt(e),z("Refresh | Requested Ads without Auction",{slots:e,msg:"Prebid encounted an error, refreshing all ad slots without auction information"})})(n),z("Auction | Prebid | Unsuccessful requesting auction bids, invoking fallback refresh with no auctioning from Prebid",{msg:{errorMessage:t}})})(e,"window.pbjs.ppi was false or undefined")}))})(i),(e=>{const t=k(re);let n=0;t?.active&&(n=Number(t?.timeout||1e3)),(Number.isNaN(n)||n<0)&&L.error(new Error('Auction | Prebid | "headerBidderTimeout" was not a positive number',{msg:{auctionTimeoutValue:t?.timeout}})),setTimeout((()=>{e.forEach((e=>{e.hbDestination.values.callback({transactionObject:e},n)}))}),n)})(i)},st=e=>{const t=Ne(e);e&&(tt(),googletag.cmd.push((()=>t.map((e=>{let t=Le(e.id);if(!t)try{t=xe({id:e.id,sizes:e.sizes,targets:e.targets,unitName:e.unitName}),googletag.display(t)}catch(e){L.error(e)}return t})))),F()&&(e=>{if(!F()||!e)return;z("Auction | Amazon TAM | Auction requested",{msg:{slotsAuctioned:e}}),h("tam-initiated-request-bids");const t=Ne(e);window.apstag.fetchBids({timeout:k("prebid")?.timeout||1e3,slots:t.map((e=>({slotID:e.id,slotName:e.unitName,sizes:Ze(e.sizes)})))},(e=>{googletag.cmd.push((()=>{window.apstag.setDisplayBids(),nt("aps",!0),h("tam-display-bids"),y("tam-fetchBids-toDisplayBids","tam-initiated-request-bids","tam-display-bids"),z("Auction | Amazon TAM | Auction finished, targeting has been applied to available ad slots",{msg:{bids:e}})}))}))})(e),at(e),z("Auction | All | Requesting bids for slots",{msg:{slotsRequested:t?.map((e=>e.id)).join(", ")}}))},lt=e=>{const t=e.split("--"),n=t.shift(),r=t.pop();return{prefix:n,key:t.join("--"),index:r}},dt=e=>{const t=e.getSlotElementId(),{key:n,index:r}=lt(t);return De(K()?.targets?.subcat)({key:n,index:r})},ct=e=>{const t=Ve(),n=0===Fe()?null:Fe(),r=Ne(e);r.forEach((e=>{const r=e.getSlotElementId();((e,t)=>{setTimeout((()=>{if(V(window.location.search)||M("debug")){const n=Ke(e),r=Object.entries({"Campaign Excluded":He(e),"Position Excluded":Be(e),"Slot Excluded":Xe(e),"Page Excluded":Ye()}),i=[],o=e=>{!0===e[1]&&i.push(e[0])};r.filter((e=>o(e)));const{campaignId:a}=Ue(e)||"",s=document.createElement("div");s.setAttribute("class","refreshOverlay");const l=`\n        <ul style="padding: 0; list-style: none; margin: 0;">\n          <li>ID: <strong>${t}</strong> | Campaign ID: <strong>${a}</strong></li>\n          <li class="${t}-debug-in-view">In View: <strong></strong></li>\n          <li class="${t}-debug-countdown">Refresh Countdown: <strong></strong></li>\n          <li class="${t}-uir-countdown">UIR Countdown: <strong>none</strong></li>\n          <li>Excluded: <strong>${n}</strong> ${n?` | Reason: <strong>${i.join(", ")}</strong>`:""}</li>\n        `;s.innerHTML=l;const d=document.getElementById(t).parentElement.parentElement;null!=d.querySelector(".refreshOverlay")?d.querySelector(".refreshOverlay").innerHTML=l:d.appendChild(s),M("refresh"),((e,t,n)=>{let r;const i=document.querySelector(`.${t}-debug-countdown`),o=document.querySelector(`.${t}-uir-countdown`),a=document.querySelector(`.${t}-debug-in-view`),s=(e,t)=>{a&&(a.innerHTML=`In View: <strong>${e}</strong>`),i&&(i.innerHTML=t),o&&(o.innerHTML="")};if(n&&a&&i)return void s("Slot excluded","Refresh Countdown: <strong>Slot excluded</strong>");const l=Ve()/1e3,d=0===Fe()?null:Fe()/1e3+1;let c=l,u=d;const p=Ue(e)?.userRefreshProcessed,g=()=>{const{refresh:n}=Ue(e)||{},i=n?.pauseTimer;document.getElementById(t)?i?s("false",""):c>0?(s("true",`Refresh Countdown: <strong>${c}s</strong>`),c-=1,p&&d>0&&(u-=1,o.innerHTML=`UIR Countdown: <strong>${u}s</strong>`),u<=0&&p&&d>0&&(o.innerHTML="UIR Countdown: <strong>Refreshable</strong>")):(s("true","Refresh Countdown: <strong>Refreshable</strong>"),clearInterval(r)):clearInterval(r)};g(),r=setInterval(g,1e3),!Ue(e)?.refresh?.pauseTimer&&a&&(a.innerHTML="In View: <strong>true</strong>")})(e,t,n)}}),500)})(e,r);const i=(new Date).getTime();Ge(e,{slotId:r,excluded:!1,targetTime:t,uirTime:n,refresh:{refreshReady:!1,refreshable:!0,pauseTimer:!1,alreadyStopped:!1,timeStopped:void 0,timeResumed:void 0,timeStarted:i,counter:0}}),(e=>{let t=0;const n=setInterval((()=>{Ke(e)?clearInterval(n):(Ue(e)?.userRefreshed&&(Ge(e,{userRefreshed:!1,userRefreshProcessed:!!Ue(e)?.uirTime}),z("Interaction refresh | Slot Timer has been reset",{msg:{slotsWatched:e.getSlotElementId()}}),t=0,clearInterval(n)),Ue(e)?.refresh?.pauseTimer||(t+=1),!Ue(e)?.refresh?.pauseTimer&&1e3*t>=Ue(e)?.uirTime&&Ue(e)?.userRefreshProcessed&&(Ge(e,{userRefreshProcessed:!1}),z("Interaction refresh | Slot is now ready to be refreshed by user interaction",{msg:{slotsWatched:e.getSlotElementId()}})),!Ue(e)?.refresh?.pauseTimer&&1e3*t>=Ue(e)?.targetTime&&Ue(e)?.refresh?.refreshable&&(clearInterval(n),Ge(e,{userRefreshProcessed:!1,refresh:{refreshReady:!0,refreshable:!0}}),h("ad-refresh"),y("time-to-ad-refresh","time-to-first-ad-impression","ad-refresh"),window.LUX.addData("ad-refreshed",1),st(dt(e))))}),1e3)})(e)})),z("Refresh | Watching slot for scheduled refresh",{msg:{slotsWatched:r.map((e=>e.getSlotElementId())).join(", ")}})},ut=e=>{const{slot:t}=e;Ge(t,{loaded:!0}),(e=>{const t=P(e),n=Le(t),{KEY:r,VALUE:i}=te;0===n.getTargeting(r).length&&(n.setTargeting(r,i),ct(e))})(t)},pt=e=>{const{slot:t,campaignId:n}=e;Ge(t,{campaignId:n})},gt=e=>{const{slot:t,inViewPercentage:n}=e,r=Ue(t);n<qe()&&((e=>{Ge(e,{refresh:{timeStopped:(new Date).getTime(),alreadyStopped:!0,refreshable:!1,pauseTimer:!0}})})(t),U("slotsCurrentlyInView",{...M("slotsCurrentlyInView"),[t.getSlotElementId()]:!1})),e.inViewPercentage>=qe()&&U("slotsCurrentlyInView",{...M("slotsCurrentlyInView"),[t.getSlotElementId()]:!0}),e.inViewPercentage>=qe()&&!r?.refresh?.timeResumed&&(e=>{Ge(e,{refresh:{timeResumed:(new Date).getTime(),alreadyStopped:!1,refreshable:!0,pauseTimer:!1}})})(t)},ft=e=>{const{slot:t}=e;Ge(t,{permutive:{segmentsTargeted:Ee()}})},mt=()=>!!k("manageConsentlessInventory")?.useConsentlessInventory,ht={THIRDPARTYCLAIMS_ENABLED:k("thirdPartyClaims")?.enable_third_party_claims,LOCALSTORAGE_CACHE_KEY:"stitcher-third-party-claims",VENDORS:{GAM:{CONSENT:{PURPOSES:[1,2,3,4,7,9,10],REQUIRED:!0,VENDORS:[755]},ENABLED:k("thirdPartyClaims")?.use_gam_third_party_claim,FUNCTION_HANDLER:"GAMThirdPartyClaim"},PERMUTIVE:{CONSENT:{PURPOSES:[1,3,5,7,8,9,10],REQUIRED:!0,VENDORS:[361]},ENABLED:k("thirdPartyClaims")?.use_permutive_third_party_claim,FUNCTION_HANDLER:"PermutiveThirdPartyClaim"},PERMUTIVE_HEM:{CONSENT:{PURPOSES:[1,3,5,7,8,9,10],REQUIRED:!0,VENDORS:[361]},ENABLED:k("thirdPartyClaims")?.use_permutive_hem_third_party_claim}}},yt={DEBUG_PREFIX:"Third Party Claims | ",SPEEDCURVE:{taskRunnerStart:e=>`tpc-time-to-task-${e}-start`,taskRunnerEnd:e=>`tpc-time-to-task-${e}-end`,taskRunnerComplete:e=>`tpc-time-to-task-${e}-complete`,vendorRan:e=>`tpc-time-to-vendor-ran-${e}`,vendorInvalidated:e=>`tpc-time-to-vendor-${e}-invalidated`}},bt=()=>!!ht.THIRDPARTYCLAIMS_ENABLED,vt=e=>!!ht.VENDORS[e]?.ENABLED,wt=({state:e=bt(),service:t="ThirdPartyClaims",message:n,data:r})=>{U(t,{...M(t),state:e}),z(`${yt.DEBUG_PREFIX}${n}`,r)},{SPEEDCURVE:Et}=yt,Tt=()=>{void 0!==window&&permutive.ready((()=>{JSON.parse(window.localStorage?.getItem("permutive-data-misc")||"{}")?.identities?.["p-guid"]&&(window.permutive.reset(),h(Et.vendorInvalidated("permutive")),wt({message:"Invalidating Permutive Third Party Claim from localStorage"}))}),"initialised")},St=({auth0ClaimID:e,requisiteConsent:t,vendor:n})=>{t&&e&&vt(n)?(()=>{const e=JSON.parse(window.localStorage.getItem("permutive-data-misc")||"{}")?.identities?.["p-guid"];return!!e})()?wt({message:"Permutive Third Party Claim of `p-guid` already exists in localStorage, not identifying again"}):(h(Et.vendorRan("permutive")),window.permutive.identify([{id:e,tag:"p-guid",priority:0}])):Tt()},At=()=>{window.localStorage.removeItem(ht.LOCALSTORAGE_CACHE_KEY),Tt()},It=()=>{const e=JSON.parse(window.localStorage.getItem(ht.LOCALSTORAGE_CACHE_KEY));if(!e)return!1;const{timestamp_expiry:t}=e;return!(Date.now()>t&&(wt({message:"Third Party Claims in localStorage are expired, clearing from localStorage"}),At(),1))};function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Rt(){Rt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new C(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p="suspendedStart",g="executing",f="completed",m={};function h(){}function y(){}function b(){}var v={};d(v,a,(function(){return this}));var w=Object.getPrototypeOf,E=w&&w(w(L([])));E&&E!==n&&r.call(E,a)&&(v=E);var T=b.prototype=h.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==_t(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){d.value=e,a(d)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===f){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=_(s,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var d=u(t,n,r);if("normal"===d.type){if(i=r.done?f:"suspendedYield",d.arg===m)continue;return{value:d.arg,done:r.done}}"throw"===d.type&&(i=f,r.method="throw",r.arg=d.arg)}}}function _(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=u(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_t(t)+" is not iterable")}return y.prototype=b,i(T,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=d(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,d(e,l,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},S(A.prototype),d(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(T),d(T,l,"Generator"),d(T,a,(function(){return this})),d(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),d=r.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Ot(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var Ct,Lt;const Pt=(Ct=Rt().mark((function e(){return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.__tcfapi("addEventListener",2,(function(n,r){if(!r)return t(new Error("Consent Management | Error retrieving data from TCFAPI"));if(window.performance.mark("onConsentReady-init"),["useractioncomplete","tcloaded"].includes(n.eventStatus)){var i=n;i.cmpCustomData={},window.__tcfapi("getCustomVendorConsents",2,(function(t){i.cmpCustomData=t,window.__tcfapi("removeEventListener",2,(function(e){e||console.error("Consent Management | Failed to remove event listener",{listenerId:n.listenerId})}),n.listenerId),window.performance.mark("onConsentReady-end"),window.performance.measure("onConsentReady-total-time","onConsentReady-init","onConsentReady-end"),e(i)}))}}))})));case 1:case"end":return e.stop()}}),e)})),Lt=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=Ct.apply(e,t);function o(e){Ot(i,n,r,o,a,"next",e)}function a(e){Ot(i,n,r,o,a,"throw",e)}o(void 0)}))},function(){return Lt.apply(this,arguments)});const{SPEEDCURVE:xt}=yt,{SPEEDCURVE:kt}=yt,Dt=({auth0ClaimID:e,requisiteConsent:t,vendor:n})=>{t&&e&&vt(n)?(h(kt.vendorRan("gam")),googletag.cmd.push((()=>{googletag.pubads().setPublisherProvidedId(e)}))):wt({message:"GAM Third Party Claim is not enabled, requisite consent is not met, or no valid auth0ClaimID passed in"})},Nt=async({thirdPartyClaims:t})=>{if(!bt())return;const n=await Pt(),{VENDORS:r}=ht,i={};Object.entries(t).forEach((([t,o])=>{const a=t.toUpperCase(),s=r[a],l=s?.FUNCTION_HANDLER,d=function(e){var t,n,r,i,o=e.tcdata,a=e.purposes,s=void 0===a?[]:a,l=e.vendorIds,d=void 0===l?[]:l;if(!o)return!1;var c=o.purpose,u=o.vendor,p=o.cmpCustomData,g=null==p||null===(t=p.consentedPurposes)||void 0===t?void 0:t.some((function(e){return"Analytics Storage"===e.name})),f=null!==(n=null==c?void 0:c.consents)&&void 0!==n?n:{},m=g?{12:!0}:{},h={iabVendors:null!==(r=null==u?void 0:u.consents)&&void 0!==r?r:{},sourcePointVendors:null!==(i=null==p?void 0:p.consentedVendors)&&void 0!==i?i:[]};return[0===s.length||s.every((function(e){return!0===f[e]||!0===m[e]})),0===d.length||d.every((function(e){return void 0!==h.iabVendors[e]?!0===h.iabVendors[e]:h.sourcePointVendors.some((function(t){return t._id===e}))}))].every(Boolean)}({tcdata:n,purposes:s?.CONSENT?.PURPOSES,vendorIds:s?.CONSENT?.VENDORS});i[t]=()=>e[l]({auth0ClaimID:o,requisiteConsent:d,vendor:a})})),await(async e=>{await Promise.all(Object.entries(e).map((async([e,t])=>{try{h(xt.taskRunnerStart(e)),await t()}catch(t){h(xt.taskRunnerEnd(e)),wt({message:"There was an issue processing some of the Third Party Claims",data:{error:t,key:e}})}finally{h(xt.taskRunnerEnd(e)),y(xt.taskRunnerComplete(e),xt.taskRunnerStart(e),xt.taskRunnerEnd(e))}})))})(i)},jt=()=>Object.fromEntries(Object.entries(ht.VENDORS).map((([e,t])=>[e.toLowerCase(),t.ENABLED])));let $t={config:{thirdPartyClaimsEnabled:jt()}};const Mt=()=>{wt({message:"Third Party Claims have been cleared from user context and localStorage"}),At(),$t=null};let Ut=e=>{e&&z("DAI | No DAI update function has been set")};const Gt=e=>!!Ze(e.sizes)?.length;let zt=[],Vt=!1;const Ft=e=>t=>{try{t(e)}catch(e){L.error(e)}};let qt=!1;const Ht=e=>()=>{qt||(qt=!0,((e,t)=>{(window.adq||[]).forEach(Ft(e))})(e),window.adq=(e=>({push:Ft(e)}))(e),h("time-to-ad-queue-processed"),window.dispatchEvent(new CustomEvent("adManagerReady")))},Bt=e=>{const t=[...document.querySelectorAll(e)].filter((e=>e.dataset?.count)),n=[];return t.forEach((e=>{""===e.innerHTML&&n.push(e)})),n},Xt="Limit reached",Yt="limit-marker",Jt="post__content",Kt="js-piano-locked-content",Wt=`.${Jt} > .${Kt} p`,Qt=`.${Jt} > .js-piano-preview-content p`,Zt="green-video",en="green-podcast",tn="blocking-element",nn="media-player",rn="ad-placement",on="ad-slot",an=[`.${on}`],sn=["ul","ol",`.${nn}`,".highlight-box",`.${Zt}`,`.${en}`,".oembed--iframe"],ln={renderIncomingText:"Lazy rendering incoming for",renderText:"should have been rendered when this line was reached",adPosText:"Ad position from the top of the page",observerPosText:"Render position (ad position minus lazy fetching distance)",viewportHeightText:"Viewport height (when the observer was created)",thresholdValueText1:"Lazy fetching distance (",thresholdValueText2:"% of the viewport)"};let dn=!1;const cn=e=>{const t=D("dai",e,we())?.lazyFetching?.viewport_height_percentage;return!t||Number.isNaN(t)?0:t>=0&&t<=100?t/100:0},un=(e,t)=>{const n=cn(e);t.forEach((e=>{((e,t)=>{dn=V(window.location.search);const n=window.innerHeight*e,r={rootMargin:`0px 0px ${n}px 0px`},i=document.getElementById(t.id);if(!i)return L.info(`No ad placeholder found for ${t.id} slot, the ad will not be displayed`),!1;const o=i.getBoundingClientRect().top,a=parseInt(o-n,10),s=new IntersectionObserver((e=>(t,n)=>{t.forEach((t=>{t.isIntersecting&&(st(e),n.unobserve(t.target))}))})(t),r);dn&&(({slotConfig:e,distanceBetweenAdSlots:t,lazyLoadThreshold:n,viewportHeight:r})=>{const i=document.getElementById(e.id);if(!i)return!1;const o=i.getBoundingClientRect().top;if(!document.querySelector(`.${e.id}-overlay`)){const i=Number.isNaN(Number(t))?0:t,a=parseInt(o-i,10),s=ln,l=`\n      top: ${a-200}px;\n    `,d=document.createElement("div");d.setAttribute("class",`${e.id}-overlay lazyFetchOverlay`),d.setAttribute("style",l),d.innerHTML=`\n      <div style="display: block; width: 100%; height: 190px; border-bottom: 5px solid black">\n        <span style="background-color: gold; padding: 10px;">\n          ${s.renderIncomingText} <strong>${e.id}</strong>\n        </span><br /><br />\n      </div>\n      <div style="background-color: gold; padding: 10px; max-width: 700px;">\n        <span>\n          <strong>${e.id}</strong> ${s.renderText}\n        </span><br /><br />\n        <span>\n          ${parseInt(o,10)}px : ${s.adPosText}\n        </span><br />\n        <span>\n          ${a}px : ${s.observerPosText}\n        </span><br />\n        <span>\n          ${r}px : ${s.viewportHeightText}\n        </span><br />\n        <span>\n          ${t}px :\n          ${s.thresholdValueText1}${100*n}${s.thresholdValueText2}\n        </span><br />\n      </div>\n    `,document.body.appendChild(d)}})({slotConfig:t,distanceBetweenAdSlots:n,lazyLoadThreshold:e,viewportHeight:window.innerHeight}),s.observe(i),dn&&L.debug(`Observer Created for ${t.id}, ${a}px from the top`,s,t)})(n,e)}))},pn=e=>{if(!e)return!1;const{targets:t}=e,n={...t,pos:[...t?.pos]};return n.pos.includes("dai")||n.pos.push("dai"),n},gn=e=>e.targets?.subcat||e.targets?.channel,fn=(e,t)=>e.map(De(t)).filter((e=>e)),mn=e=>({...D("dai",gn(e),we()),contentType:gn(e)}),hn=e=>{googletag.cmd.push((()=>{googletag.pubads().setTargeting("kw",e.length>0?"inline":"no_inline")}))},yn=(e,t,n)=>{hn(t);const r=((e,t)=>e.map((e=>{const n=Re(e.sizes,t);return _e(n)?null:{...e,sizes:n}})).filter(Boolean))(t,window.innerWidth);return e.forEach(((e,t)=>{r[t]&&((e,t,n,r)=>{if(!(e&&t&&n&&r))return;const i=document.createElement("div");i.classList.add("stitcher-ad--dai-disclaimer");const o=document.createElement("div");o.classList.add("stitcher-ad--dai-container"),o.setAttribute("style",Ce(n));const a=document.createElement("div");if(a.setAttribute("id",t.id),a.classList.add("stitcher-ad--dai-slot"),t.showDisclaimer){const t=k("adLabelTextSiteDefault")||"Ad";i.innerText=t,a.setAttribute("data-adlabeltext",t),e.appendChild(i)}e.classList.add("stitcher-ad--dai-placeholder"),e.appendChild(o),o.appendChild(a)})(e,r[t],Oe(r[t]?.sizes),n)})),r},bn=(e,t,n=!1,r,i=0)=>{if(0===e.length)return void hn([]);let o=((e,t,n="inline",r=0)=>{const i=((e,t,n,r=0)=>new Array(e).fill({key:t}).map(((e,i)=>({contentType:n,key:t,index:i+5+r}))))(t,n,e,r);return i.map(De(e)).filter((e=>e)).map((e=>({...e,targets:pn(e)})))})(t,e.length,r,i);n&&Array.isArray(n)&&(o=((e,t,n)=>{const r=fn(n,e);let i;return n.forEach(((e,n)=>{e.index<5&&(i=e.position),r[n]&&t.splice(i,0,r[n])})),t})(t,o,n));const a=yn(e,o,t);un(t,a)},vn=(e,t)=>{if(!e)return!1;const n=Object.keys(e);return!(Object.values(e).length<=1||!t.every((e=>n.includes(e))))},wn=(()=>{const e=new Set;return(t,n)=>{const r=Number(t.dataset?.count),i=Math.floor(r/n);return!e.has(i)&&r>=n*i&&r<n*(i+1)&&(e.add(i),!0)}})(),En=(e,t)=>{const n=[];return Array.isArray(t)&&t.length>0&&t.forEach((t=>{if("string"==typeof t&&t.length>0){const r=Array.from(e.querySelectorAll(t));n.push(...r)}})),n},Tn=(e,t,n)=>{const r=[];let i=t;for(;i<=n;)r.push(e[i-1]),i+=t;return r},Sn=["mpu3To5","mpu6Plus"],An=(e,t,n,r=!1,i,o)=>{if(!Number.isInteger(n)||n<=0)return!1;if(t.length<=1)return!1;const a=Array.from(e.querySelectorAll(t));if(a.length<n||r&&a.length<=n)return!1;const s=r?a.length-1:a.length,l=((e,t,n)=>{const r=[];return e.forEach((e=>{const i=e.nextElementSibling;if(n.includes(e)||t.includes(i))return;const o=document.createElement("div");o.setAttribute("class","ad-placement col-12"),e.after(o),r.push(o)})),r})(Tn(a,n,s),En(e,i),En(e,o));return 0!==l.length&&l},In=["cardSpacing"],_n=["mpu2Lvl1","mpu2Lvl2","mpu2Lvl3","mpu3"],Rn={lowerBound:1,upperBound:3},On={lowerBound:4,upperBound:6},Cn={lowerBound:7},Ln=(e,{lowerBound:t,upperBound:n=null})=>n?e>=t&&e<=n:e>=t,Pn=e=>{if(vn(e,_n)){const t=((e,t,n)=>{const r=[],i=((e,t)=>{switch(!0){case Ln(t,Rn):return e.mpu2Lvl1;case Ln(t,On):return e.mpu2Lvl2;case Ln(t,Cn):return e.mpu2Lvl3;default:return 0}})(n,t);if(0===(t||i))return r;if(r.push(e.find((e=>Number(e.dataset.count)>=i))),t>=7&&1===r.length){const t=n.mpu3+i;r.push(e.find((e=>Number(e.dataset.count)>=t&&Number(r[0].dataset.count)!==Number(e.dataset.count))))}const o=r.filter((e=>e));return r.length===e.length&&(o[0].endOfContent=!0),o})(Bt("div.ad-placement"),(({recipeDesignV1:e,recipeDesignV2:t})=>{const n=document.querySelectorAll(t).length;return n>0?n:document.querySelectorAll(e).length})({recipeDesignV1:"section.recipe__ingredients li",recipeDesignV2:'section[data-stitcher-dai-container="ingredients-list"] li'}),e);bn(t,e.contentType)}},xn=(e,t,n,r=!1,i,o)=>{if(!Number.isInteger(n)||n<=0)return!1;if(t.length<=1)return!1;const a=Array.from(e.querySelectorAll(t));if(a.length<n||r&&a.length<=n)return!1;const s=r?a.length-1:a.length,l=((e,t,n)=>{const r=[];let i=0;return e.forEach((e=>{if("true"===e.getAttribute("data-stitcher-dai-matched"))return void(i+=1);const o=e.nextElementSibling;if(n.includes(e)||t.includes(o))return;const a=document.createElement("div");a.setAttribute("class","ad-placement"),e.after(a),e.setAttribute("data-stitcher-dai-matched","true"),r.push(a)})),{containerElements:r,existingDaiCount:i}})(Tn(a,n,s),En(e,i),En(e,o));return 0!==l.containerElements.length&&l},kn=["cardSpacing"],Dn=(e,t,n)=>{const r=xn(e,'*[data-stitcher-dai-content="list-item"]',t.cardSpacing,n);!r.containerElements||r.containerElements.length<=0||bn(r.containerElements,t.contentType,!1,"inline",r.existingDaiCount)},Nn=["mpuCharacterCount","maxAds"],jn=["mpuCharacterCount","maxAds"],$n=["mpuCharacterCount","maxAds"],Mn=["listCardSpacing"],Un=["gridCardSpacing"],Gn={addSlot:e=>{if(!e||void 0===e.key||void 0===e.index)throw new Error('Invalid data. Slot has to be an object with "key" and "index" properties');if(!(e=>!!zt.find((t=>t.key===e.key&&t.index?.toString()===e.index?.toString())))(e)){if(Vt){const t=De(K()?.targets?.subcat)(e);if(!t||!Gt(t))return;ze(t),st(t)}zt.push(e)}},clearContext:e=>{e&&e.length?(e.forEach(H(Y)),0===Object.keys(Y).length&&(Y=null)):Y=null},clearUserContext:Mt,isUserContextValid:()=>It(),destroyAdSlots:({slotKey:e,removePlacements:t=!1})=>{if(!e)return;const n=V(window.location.search),r=googletag.pubads().getSlots().filter((t=>t.getSlotElementId().includes(e)));r.length>0&&(window.googletag.destroySlots(r),n&&(e=>{e.forEach((e=>{const t=document.getElementById(e.getSlotElementId()).parentElement.parentElement.querySelector(".refreshOverlay");t&&t.remove()}))})(r)),t&&(e=>{const t=V(window.location.search);if("list"===e||"search"===e){const e=document.querySelectorAll('div[data-stitcher-dai-matched="true"]');e.length>0&&e.forEach((e=>{e.dataset.stitcherDaiMatched="false"}))}document.querySelectorAll("div.ad-placement").forEach((e=>{e.remove()})),t&&document.querySelectorAll("div.lazyFetchOverlay").forEach((e=>{e.remove()}))})(K()?.targets?.subcat),window.LUX.addData("ad-slots-destroyed",1),z("AdSlots destroyed",{msg:{slotKey:e,reason:"Invoked by user interaction"}})},getContext:J,getUserContext:()=>ht.THIRDPARTYCLAIMS_ENABLED?$t||null:(wt({state:ht.THIRDPARTYCLAIMS_ENABLED,message:"Third Party Claims is not enabled for this website"}),null),injectDynamicAds:()=>{const e=K(),t=mn(e);"article"===t.contentType&&(e=>{if(((e,t)=>{const n=[];if(e.forEach((({key:e,index:t})=>{const r=(i=`div.ad-placement-${e}--${t}`,document.querySelector(i));var i;r&&n.push(r)})),0===n.length)return;const r=fn(e,t),i=yn(n,r,t);un(t,i)})([{key:"inline",index:2}],e.contentType),vn(e,Sn)){const t=((e,t)=>{const n=[];let r=t.mpu3To5;return e.forEach((e=>{((e,t)=>e.dataset?.paragraphsLeft&&((e,t)=>e>=t)(Number(e.dataset?.count),t))(e,r)&&n.length<t.maxAds&&!(e=>Number(e.dataset?.paragraphsLeft)<=6)(e)&&(n.push(e),r+=((e,t)=>(e=>e<=3)(e)?t.mpu3To5:t.mpu6Plus)(n.length,t))})),n})(Bt("div.ad-placement"),e);bn(t,e.contentType)}})(t),"index"===t.contentType&&(e=>{const t=document.querySelector("div[data-stitcher-dai-container]");if(!t)return;if(!vn(e,In)||!e?.cardSpacing)return void z("DAI | Index Grid layout issue detected with parameters passed, early return",e);const n=An(t,'div[data-stitcher-dai-content="grid-item"]',e.cardSpacing,!0);!n||n.length<=0||bn(n,e.contentType,[{key:"inline-grid",index:1,position:0},{key:"inline-grid",index:2,position:1}],"inline-grid")})(t),(e=>"glossary"===e)(t.contentType)&&(e=>{const t=[{key:"inline",index:2,position:0}];if(vn(e,Nn)){const n=((e,t,n)=>{const r=[];return e.forEach((e=>{wn(e,t)&&r.length<n&&r.push(e)})),r})(Bt("div.ad-placement"),e.mpuCharacterCount.mpuCharacterLimit,e.maxAds);bn(n,e.contentType,t)}})(t),(e=>"list"===e)(t.contentType)&&(e=>{if(!vn(e,kn)||!e?.cardSpacing)return;const t=document.querySelector('*[data-stitcher-dai-container="list"]');if(!t)return;let n=!1;t.querySelector('*[data-stitcher-dai-avoid="load-next-button"]')&&(n=!0),Dn(t,e,n),(e=>{const t=V(window.location.search);Ut=e,t&&z("DAI | Setting DAI update callback",{msg:{theCallback:e}})})((()=>{Dn(t,e,n)}))})(t),(e=>"plant"===e)(t.contentType)&&(e=>{const t=[{key:"inline",index:2,position:0}];if(vn(e,jn)){const n=((e,t,n)=>{const r=[];return e.forEach((e=>{wn(e,t)&&r.length<n&&r.push(e)})),r})(Bt("div.ad-placement"),e.mpuCharacterCount.mpuCharacterLimit,e.maxAds);bn(n,e.contentType,t)}})(t),(e=>"recipe"===e)(t.contentType)&&Pn(t),(e=>"review"===e)(t.contentType)&&(e=>{const t=[{key:"inline",index:2,position:0}];if(vn(e,$n)){const n=((e,t,n)=>{const r=[];return e.forEach((e=>{wn(e,t)&&r.length<n&&r.push(e)})),r})(Bt("div.ad-placement"),e.mpuCharacterCount.mpuCharacterLimit,e.maxAds);bn(n,e.contentType,t)}})(t),(e=>"search"===e)(t.contentType)&&(e=>{const t=document.querySelector("div[data-stitcher-dai-container]");if(!t)return;const n=V(window.location.search);switch(t.dataset.stitcherDaiContainer){case"list":((e,t)=>{if(!vn(e,Mn)||!e?.listCardSpacing)return void z("DAI | Search List layout issue detected with parameters passed, early return",e);let n=!1;document.querySelector('div.search-results div[data-feature="Load More Paginator"] a.button')&&(n=!0);const r=xn(t,'div[data-stitcher-dai-content="list-item"]',e.listCardSpacing,n);!r.containerElements||r.containerElements.length<=0||bn(r.containerElements,e.contentType,[{key:"inline-list",index:1,position:0},{key:"inline-list",index:2,position:1}])})(e,t),n&&z("DAI | List layout detected for search page",t);break;case"grid":((e,t)=>{if(!vn(e,Un)||!e?.gridCardSpacing)return void z("DAI | Search Grid layout issue detected with parameters passed, early return",e);let n=!1;document.querySelector('div.search-results div[data-feature="Load More Paginator"] a.button')&&(n=!0);const r=An(t,'div[data-stitcher-dai-content="grid-item"]',e.gridCardSpacing,n);!r||r.length<=0||bn(r,e.contentType,[{key:"inline-grid",index:1,position:0},{key:"inline-grid",index:2,position:1}],"inline-grid")})(e,t),n&&z("DAI | Grid layout detected for search page",t);break;default:n&&z("DAI | Invalid stitcher container for search page",t)}})(t),hn([])},refreshSlot:e=>{var t;t=()=>{const t=(e=>{const t=window.googletag.pubads().getSlots(),n=(()=>{const e=window.googletag.pubads().getSlots().filter((e=>!Ke(e))),t=M("slotsCurrentlyInView");return e.filter((e=>t[e.getSlotElementId()])).map((e=>e.getSlotElementId()))})();return t.map(dt).filter((t=>(Ue(t)?.userRefreshProcessed&&z("Interaction refresh | Prevented slots from being refreshed",{msg:{slotConfig:t,reason:"User Interaction Refresh has occured too recently for this slot"}}),e&&e.length>0?e.some((e=>e.includes(t.id)&&!Ue(t)?.userRefreshProcessed)):n.some((e=>e.includes(t.id)&&!Ue(t)?.userRefreshProcessed)))))})(e);t.length>0&&(st(t),h("ad-refresh"),t.forEach((e=>{Ge(e,{userRefreshed:!0}),window.LUX.addData("ad-refreshed-by-user",1)})),z("Interaction refresh | Slots to be processed to be refreshed",{msg:{slotsToRefresh:t,reason:"Invoked by user interaction on page"}}))},"undefined"!=typeof window&&(window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push(t))},setContext:(e,t)=>{Y?(Y=X(Y,e),t&&window.dispatchEvent(new CustomEvent(t))):Y=e},setUserContext:({thirdPartyClaims:e,useCache:t=!0})=>{if(!ht.THIRDPARTYCLAIMS_ENABLED)return wt({state:!1,message:"Third Party Claims is not enabled for this website"}),void Mt();const n=It(),r=t&&n&&It()&&JSON.parse(window.localStorage.getItem(ht.LOCALSTORAGE_CACHE_KEY))?.thirdPartyClaims||null,i=r||e;if(r||n||((e,t=36e5)=>{if(!e)return;const n=Date.now(),r={thirdPartyClaims:e,timestamp_init:n,timestamp_expiry:n+t};window.localStorage.setItem(ht.LOCALSTORAGE_CACHE_KEY,JSON.stringify(r)),wt({message:"Third Party Claims added to localStorage"})})(e),!i)return wt({state:!0,message:"No valid third party claims found in cache or passed in, not running"}),void Mt();$t={config:{thirdPartyClaimsEnabled:jt()},thirdPartyClaims:i},Nt({thirdPartyClaims:i})},updateDynamicAds:()=>{const e=V(window.location.search);e&&z("DAI | Firing the DAI update function",{msg:{daiCallback:Ut}}),Ut(e)},version:()=>"12.47.1"};Gn.ready=Ht(Gn);const zn=(e,t,n)=>e?Object.keys(e).reduce(((r,i)=>n?[...r,`${e[i][t]}`]:[...r,`${i}-${e[i][t]}`]),[]).join(","):null,Vn=e=>e.textContent.length,Fn=(e,t)=>Boolean([...t].map((t=>e.contains(t))).find((e=>!0===e))),qn=e=>Boolean(e.children.length&&[...e.children].find((e=>"IFRAME"===e.tagName))),Hn=e=>e.nextElementSibling?.className===rn,Bn=e=>{const t=[...document.querySelector(`.${Jt}`).children].filter((e=>[...e.classList].includes(Kt))),n=t.indexOf(e.parentNode);return t[n+1]},Xn=e=>t=>{if(!e.nextElementSibling){const n=[...document.querySelector(`.${Jt}`).children].filter((e=>[...e.classList].includes(Kt))),r=n.indexOf(e.parentNode);return t===n[r+1]?.children[0]}return Hn(e)?e.nextElementSibling.nextElementSibling?t===e.nextElementSibling.nextElementSibling:t===Bn(e)?.children[0]:t===e.nextElementSibling},Yn=/(<[^>]+>)/g,Jn=(e,t)=>{const n=(e=>e.previousElementSibling?e.previousElementSibling.className===rn?e.previousElementSibling.previousElementSibling:e.previousElementSibling:null)(e);return e.previousElementSibling?Fn(n,t):Fn((e=>{const t=[...document.querySelector(`.${Jt}`).children].filter((e=>[...e.classList].includes(Kt))),n=t.indexOf(e.parentNode),r=[...t[n-1].children].filter((e=>"P"===e.tagName));return r[r.length-1]})(e),t)},Kn=e=>t=>((e,t)=>(e=>"UL"===e.tagName||"OL"===e.tagName)(e)&&Jn(e,t))(t,e)||((e,t)=>(e=>qn(e)||[...e.classList].includes(nn)||[...e.classList].includes(Zt)||[...e.classList].includes(en))(e)&&Jn(e,t))(t,e),Wn=(e,t)=>{const n=e.length;if(n<=t)return 0;const r=Math.floor(n/t);return n%t==0?r-1:r},Qn=()=>document.querySelectorAll(`.${Yt}`),Zn=e=>document.querySelectorAll(e),er=e=>e.map((e=>`.${Kt} > ${e}`)).join(),tr=e=>[...document.querySelectorAll(er(an))].filter((e=>t=>((e,t)=>(e=>[...e.classList].includes(on))(e)&&Jn(e,t))(t,e))(e)),nr=e=>"P"===e.previousSibling.tagName?e.previousSibling:nr(e.previousSibling),rr=e=>{if("recipe"===e)return[...document.querySelector(".method-steps__list").querySelectorAll("p, .heading-6")].slice(0,-1);if(["glossary","plant","review"].includes(e))return[...document.querySelectorAll(Qt),...document.querySelectorAll(Wt)];const t=[...document.querySelectorAll("[id*='--inline--']")].pop();if(t&&t.parentElement.parentElement){const e=[...document.querySelectorAll(Wt)].slice(1),n=nr(t.parentElement.parentElement),r=e.indexOf(n)-5;return e.slice(0,r>0?r:0)}return[...document.querySelectorAll(Wt)].slice(1,-1)},ir="\n  color: rgb(51, 51, 51);\n  opacity: 0.9;\n  border-radius: 5px;\n  font-size: 14px;\n  font-weight: bold;\n",or=`\n  background-color: gold;\n  position: fixed;\n  top: 10px;\n  right: 10px;\n  z-index: 999;\n  padding: 15px;\n  pointer-events: all;\n  ${ir}\n`,ar=e=>{const t={lazyFetchingOverlays:!1,refreshOverlays:!1};void 0!==JSON.parse(window.localStorage.getItem("stitch_debug"))[e]&&Object.assign(t,JSON.parse(window.localStorage.getItem("stitch_debug"))),t[e]?t[e]&&(t[e]=!1,document.getElementsByTagName("body")[0].classList.add(`${e}-hidden`)):(t[e]=!0,document.getElementsByTagName("body")[0].classList.remove(`${e}-hidden`)),window.localStorage.setItem("stitch_debug",JSON.stringify(t))},sr=e=>{const t=document.createElement("div"),n=JSON.parse(window.localStorage.getItem("stitch_debug"));if(!n){const n={lazyFetchingOverlays:!1,refreshOverlays:!1};return window.localStorage.setItem("stitch_debug",JSON.stringify(n)),document.getElementsByTagName("body")[0].classList.add(`${e}-hidden`),t.innerHTML=`\n    <label class="stitch_debug-switch ${e}" style="padding-left:0.5em;">\n      <input class="${e}-input" type="checkbox">\n      <span class="stitch_debug-slider round"></span>\n    </label>`,t}return n[e]?document.getElementsByTagName("body")[0].classList.remove(`${e}-hidden`):document.getElementsByTagName("body")[0].classList.add(`${e}-hidden`),t.innerHTML=`\n  <label class="stitch_debug-switch ${e}" style="padding-left:0.5em;">\n    <input class="${e}-input" type="checkbox" ${n[e]?"checked":""}>\n    <span class="stitch_debug-slider round"></span>\n  </label>`,t},lr=e=>{(()=>{const e=document.createElement("style");e.textContent='\n  .stitch_debug-switch {\n    position: relative;\n    display: inline-block;\n    width: 50px;\n    height: 24px;\n  }\n  \n  /* Hide default HTML checkbox */\n  .stitch_debug-switch input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n  \n  /* The slider */\n  .stitch_debug-slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: .4s;\n    transition: .4s;\n  }\n  \n  .stitch_debug-slider:before {\n    position: absolute;\n    content: "";\n    height: 16px;\n    width: 16px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n  }\n  \n  .lazyFetchingOverlays-input:checked + .stitch_debug-slider, \n  .refreshOverlays-input:checked + .stitch_debug-slider {\n    background-color: #2196F3;\n  }\n  \n  .lazyFetchingOverlays-input:focus + .stitch_debug-slider,\n  .refreshOverlays-input:focus + .stitch_debug-slider {\n    box-shadow: 0 0 1px #2196F3;\n  }\n  \n  .lazyFetchingOverlays-input:checked + .stitch_debug-slider:before,\n  .refreshOverlays-input:checked + .stitch_debug-slider:before  {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n  \n  /* Rounded sliders */\n  .stitch_debug-slider.round {\n    border-radius: 34px;\n  }\n  \n  .stitch_debug-slider.round:before {\n    border-radius: 50%;\n  }\n\n  .lazyFetchOverlay {\n    box-sizing: border-box;\n    color: black;\n    display: block;\n    margin: 0;\n    opacity: 0.9;\n    position: absolute;\n    width: 100vw;\n    z-index: 9998;\n  }\n  \n  .refreshOverlays-hidden .refreshOverlay, \n  .lazyFetchingOverlays-hidden .lazyFetchOverlay { opacity: 0; pointer-events: none; }\n\n  .refreshOverlays-visible .refreshOverlay, \n  .lazyFetchingOverlays-visible .lazyFetchOverlay { opacity: 0.9; }\n\n  .refreshOverlay ul li,\n  .refreshOverlay ul li strong,\n  .ad-placement .refreshOverlay ul li,\n  .ad-placement .refreshOverlay ul li strong {\n    font-family: Arial, sans-serif;\n    font-size: 12px;\n    line-height: 1.5;\n    margin: 0;\n  }\n\n  .refreshOverlay ul li::before { display: none; } \n\n  .refreshOverlay ul, .ad-placement .refreshOverlay ul { \n    padding: 0;\n    margin: 0;\n    list-style-type: none;\n  }\n\n  .refreshOverlay {\n    position: absolute;\n    display: block;\n    width: auto;\n    background-color: white;\n    top: 0px;\n    right: 0px;\n    padding: 0.5em;\n    z-index: 1;\n    margin: 0;\n    font-size: 12px;\n    text-align: left;\n    border-bottom: 2px solid black;\n    opacity: 0.8;\n  }\n\n  .list-limit-marker {\n    position: absolute;\n    display: block;\n    width: 100%;\n    top: -41px;\n    left: 0px;\n    padding: 0.5em;\n    z-index: 1;\n    margin: 0;\n    font-size: 12px;\n    text-align: left;\n    border-bottom: 2px solid black;\n    opacity: 0.8;\n  }\n\n  .list-limit-marker span {\n    width: auto;\n    background-color: white;\n  }\n\n  .ad-slot, .ad-placement {\n    position: relative;\n  }\n\n  .ad-slot--oop .refreshOverlay {\n    left: 0px;\n    width: 165px;\n  }\n\n  .schedule__ad-slot {\n    position: absolute\n  }\n  ',document.head.appendChild(e)})();const t=sr("refreshOverlays"),n=sr("lazyFetchingOverlays"),r='"margin:0;padding:0 0 0 0.5em;font-size:12px;"',i='"margin: 0.5em 0;padding:0;border-bottom:1px solid black"',o=(()=>{const e=document.createElement("div");return e.setAttribute("id","stitch-global-settings"),e.setAttribute("style",or),e})();let a="";a+=`<p style=${r}>Device Type: ${we()}</p>\n  <p style=${i}>DAI Settings</p>`,e.forEach((e=>{a+=`<p style=${r}>${e.label}: ${e.value}</p>`})),a+=`\n    <span>\n      <p style=${r}>Show Lazy Fetch Overlay</p>\n      ${n.innerHTML}\n    </span>\n  `,a+=`<p style=${i}>Refresh Settings</p>`,(()=>{const e=M("refresh");return[{label:"Enabled",value:e?.enabled?e.enabled:"false"},{label:"Timer",value:e?.refreshTimer?`${e.refreshTimer}s`:"none"},{label:"In View Percentage",value:e?.inViewPercentage?`${e.inViewPercentage}%`:"none"},{label:"Campaign Exclusions",value:e?.excludedIds?e.excludedIds:"none"},{label:"UIR Timer",value:e?.uir?e.uir:"none"}]})().forEach((e=>{a+=`\n      <p style=${r}>${e.label}: ${e.value}</p>\n    `})),a+=`\n    <span>\n      <p style=${r}>Show Refresh Overlay</p>\n      ${t.innerHTML}\n    </span>\n  `,o.innerHTML=a,document.getElementById("__next").appendChild(o),document.querySelector(".lazyFetchingOverlays-input").addEventListener("click",(()=>{ar("lazyFetchingOverlays")}),!1),document.querySelector(".refreshOverlays-input").addEventListener("click",(()=>{ar("refreshOverlays")}),!1)},dr=`\n  display: block;\n  background-color: lightgreen;\n  padding: 0 10px;\n  width: 100%;\n  margin: 0;\n  position: relative;\n  z-index: 9999;\n  ${ir}\n`,cr=(e,t,n,r)=>{[...e].forEach((e=>{const i=[...t].find(Xn(e));if(!Fn(e,r)||i)return;const o=(()=>{const e=document.createElement("span");return e.innerText="Ad slot",e.setAttribute("style",dr),e.classList.add("ad-slot-marker"),e})();if(![...n].find(Xn(e)))return void e.after(o);if(Hn(e))return void e.nextElementSibling.nextElementSibling.after(o);const a=!e.nextElementSibling,s=Bn(e);a&&s?s.children[0].after(o):e.nextElementSibling.after(o)}))},ur=`<span style="\n  position: absolute; \n  background-color: gold; \n  pointer-events: none; \n  padding: 0 10px; \n  text-align: center; \n  width: 128px; \n  margin: 0; \n  z-index: 999;\n  ${ir}\n" class=${Yt}>${Xt}</span>`,pr=(e,t,n)=>{const{innerHTML:r}=e,i=r.split(Yn);let o=0;i.forEach(((e,n)=>{(e=>Yn.test(e))(e)||(e=>e.includes(Xt))(e)||[...e].forEach(((e,r)=>{o===t-1&&(i[n]=i[n].slice(0,r+1)+ur+i[n].slice(r+1)),o+=1}))}));const a=i.reduce(((e,t)=>e+t));e.parentNode.setAttribute("style","position: relative;"),e.setAttribute("style","margin-bottom: 0px"),n?e.innerHTML=a:setTimeout((()=>{e.innerHTML=a}),5e3)},gr=e=>{document.querySelectorAll(`.${tn}`).forEach((e=>e.remove())),e.forEach((e=>{const t=document.createElement("div");var n;t.classList.add(tn),t.setAttribute("style",`\n  position: absolute;\n  display: block;\n  height: ${(n=e).offsetHeight}px;\n  width: 100%;\n  background-color: tomato;\n  top: ${n.offsetTop}px;\n  left: ${n.offsetLeft}px;\n  padding: 15px;\n  z-index: 1;\n  pointer-events: none;\n  margin: 0;\n  ${ir}\n`),t.textContent="Blocking element",e.parentNode.setAttribute("style","position: relative;"),e.parentNode.appendChild(t)}))},fr=(e,t=100)=>{let n,r,i,o,a=0;const s=()=>{o=0,a=+new Date,i=e.apply(n,r),n=null,r=null};return function(...e){n=this,r=e;const l=new Date-a;return o||(l>=t?s():o=setTimeout(s,t-l)),i}},mr=(e,{charLimits:t,adsNumber:n})=>{const r=cn(e);lr([{label:"Page Type",value:e},{label:"MPU char limit",value:t?.mpu3To5?`${t?.mpu3To5} / ${t?.mpu6Plus}`:t?.mpuCharacterCount?.mpuCharacterLimit},{label:"Ads number limit",value:n},{label:"DAI Lazy Load",value:100*r+"%"}]);const i=rr(e);((e,t,n)=>{let r=n?.mpu3To5||n?.mpuCharacterCount?.mpuCharacterLimit,i=0,o=0;[...e].every((e=>{const a=Vn(e),s=r-i;if(a<s)return i+=a,!0;if(a>=s){const s=((e,t,n)=>Math.floor((e+t)/n))(a,i,r);if(((e,t,n,r)=>{for(let i=0;i<e;i+=1)pr(t,n+(n*i-r))})(s,e,r,i),o+=1,o===t)return!1;i=a-(s*r-i),n?.mpu3To5&&n?.mpu6Plus&&4===o&&(r=n?.mpu6Plus)}return!0}))})(i,n,t);const o=Qn(),a=tr(o),s=(e=>[...document.querySelectorAll(er(sn)),...[...document.querySelectorAll("p")].filter((e=>qn(e)))].filter(Kn(e)))(o);cr(i,a,s,o),gr([...a,...s]),window.onresize=fr((()=>{gr([...a,...s])}),200)},hr=e=>{const t=["ad-unit","dfp-ad"];return e.tagName?e.classList.contains(t[0])||e.classList.contains(t[1])?[e]:e.firstElementChild?[...e.querySelectorAll(t[0],t[1])]:[]:[]},yr=(e,t)=>e?e.replace(t,""):null,br={googleadmanager_id:async e=>{return(t=yr(e,"gam_"))&&"string"==typeof t?(h("time-to-gam-ppid-retrieved"),googletag.cmd.push((()=>{googletag.pubads().setPublisherProvidedId(t)}))):(L.warn("sendGAMID did not run, no GUID provided"),null);var t},permutive_identityframework_id:async e=>{return(t=yr(e,"pif_"))&&"string"==typeof t?"undefined"!=typeof window&&JSON.parse(window.localStorage.getItem("permutive-data-misc"))?.identities["p-guid"]?null:(h("time-to-permutive-id-retrieved"),window.permutive.identify([{id:t,tag:"p-guid",priority:0}])):(L.warn("sendPermutiveID did not run, no GUID provided"),null);var t}},vr=async()=>{if(ht.THIRDPARTYCLAIMS_ENABLED)L.info("Third Party Claims is enabled, not executing Stitcher User Guids");else{if("1"!==(n=Q.LOGGEDIN_COOKIE_NAME,document.cookie.split("; ").map((e=>e.split("="))).reduce(((e,[t,n])=>({...e,[t]:n})),{})[n]))return(()=>{if("undefined"!=typeof window){const e=JSON.parse(window.localStorage.getItem("permutive-data-misc"));delete e?.identities["p-guid"],window.localStorage.setItem("permutive-data-misc",JSON.stringify(e))}})(),e=Q.LOCALSTORAGE_KEY,void window.localStorage.removeItem(e);var e;try{h("time-to-stitcher-guids-initiated");let e=(e=>JSON.parse(window.localStorage.getItem(e)))(Q.LOCALSTORAGE_KEY);if(!e){const n=await fetch(Q.ROUTE);if(!n.ok)throw new Error(`${n.status} ${n.statusText}`);e=(await n.json()).message,t=e,window.localStorage.setItem(Q.LOCALSTORAGE_KEY,JSON.stringify(t))}await(async e=>{await Promise.all(e.map((async({key:e,value:t})=>{const n=br[e];try{await(n?.(t))}catch(t){L.error(`Error processing provider type ${e}: ${t.message}`)}})))})(e),h("time-to-stitcher-guids-complete"),y("time-to-stitcher-guids-initiated","time-to-stitcher-guids-complete")}catch(e){L.error(Q.ERROR_MESSAGE)}}var t,n},wr=["targets.subcat"],{PROJECT_ID:Er,APIKEY:Tr,USEAFFINITYCOHORTS:Sr,PAGEDATA:Ar}=Z;U("consentlessInventoryMode",mt()),window.googletag=window.googletag||{cmd:[]},(()=>{const e="UserReport";return ae()?(oe({service:e,state:"disabled",message:"UserReport will not surface a survey, URL is in exclusion list",data:{currentPath:window.location.pathname}}),se(),!1):(t=()=>(se(),oe({service:e,state:"disabled",message:"UserReport will not show a survey, CMP has been surfaced",data:{currentPath:window.location.pathname}}),!1),window.__tcfapi("addEventListener",2,(function(e,n){n&&"cmpuishown"===e.eventStatus&&(t(),window.__tcfapi("removeEventListener",2,(function(e){if(!e){var t=new Error("removeEventListener failure in TCFAPI");console.error(t)}}),e.listenerId))})),!0);var t})(),function(e,t,n,r){if(e&&t&&r){h(A.MONITORING.INIT);var i=A.AFFINITYCOHORTS.API(e),o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pageProperties:C(n),url:A.CLIENTDATA.url})};fetch(i,o).then((function(e){if(h(A.MONITORING.API_REQUESTED),!e.ok)throw new Error(A.AFFINITYCOHORTS.ERROR_MESSAGE);return e.json()})).then((function(e){h(A.MONITORING.API_RETURNED),y(A.MONITORING.API_REQUEST_COMPLETE,A.MONITORING.API_REQUESTED,A.MONITORING.API_RETURNED),window.permutive.addon("contextual",e);var t=(e.gam||[]).concat("rts");window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setTargeting("prmtvctx",t)})),h(A.MONITORING.SET_TARGETING),y(A.MONITORING.TIME_TO_SET_TARGETING,A.MONITORING.API_RETURNED,A.MONITORING.SET_TARGETING),y(A.MONITORING.TIME_TO_COMPLETE,A.MONITORING.INIT,A.MONITORING.SET_TARGETING)})).catch((function(e){S.info(e)}))}}(Tr,Er,Ar,Sr),h("time-to-ad-manager-loaded"),(()=>{if(!F())return;z("TAM: Amazon TAM Enabled, adding script to page");const e=(e,t)=>{window.apstag._Q.push([e,t])};window.apstag=window.apstag||{init(...t){e("i",t)},fetchBids(...t){e("f",t)},setDisplayBids(){},targetingKeys:()=>[],_Q:[]};const t={adServer:"googletag",bidTimeout:2e3,gdpr:{cmpTimeout:8e3},params:{},pubID:"3331",deals:!0};"function"==typeof window.__uspapi?window.__uspapi("getUSPData",1,((e,n)=>{n&&(t.params.us_privacy=e.uspString),window.apstag.init(t,(()=>{z("TAM: Amazon UAM initialized, USPAPI")}))})):window.apstag.init(t,(()=>{z("TAM: Amazon UAM initialized, not USPAPI")}))})(),z("Ad manager loaded");const Ir=e=>{googletag.cmd.push((()=>{if((()=>{const e=k("lazyRendering");if(z("Lazy loading settings:",{lazyLoading:e}),e?.enabled)try{googletag.pubads().enableLazyLoad(e)}catch(e){googletag.pubads().collapseEmptyDivs(),L.error(`Lazy Loading was not enabled or it did not load, \n      {error: ${e.message}}, \n      {key}: permutive | identityGUIDs}`)}else googletag.pubads().collapseEmptyDivs()})(),U("bid_providers",ne),tt(),googletag.enableServices(),(()=>{if(!N("refresh",we()))return!1;if((()=>{const e=window.location;return!(!e.host.includes("radiotimes")||!e.pathname.includes("tv/12345")&&!e.pathname.includes("radio/12345")||(z("Refresh | Refresh is not enabled",{msg:"RT Listings"}),0))})())return ze(googletag.pubads().getSlots()),window.googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotVisibilityChanged",gt),googletag.pubads().addEventListener("slotRenderEnded",pt)})),!1;const e=N("refresh",we()),{enabled:t,inViewPercentage:n,refreshTimer:r,consentlessRefresh:i}=e;if((e=>{const t=m([1,2,3,4,5,6,8,9,10,11]);return!(!mt()||!1!==t||!1!==e||(z("Refresh | Refresh is not enabled",{msg:"Consentless Refresh has been disabled"}),0))})(i))return!1;if(!t||!r||!n){const e={enabled:!t,refreshTimer:!r,inViewPercentage:!n};return U("refresh",!1),z("Refresh | Refresh is not enabled",{msg:{reasonNotEnabled:e}}),r&&n||window.LUX.addData("ad-refresh-missing-config",!0),!1}U("refresh",e),ze(googletag.pubads().getSlots()),window.googletag.cmd.push((()=>{googletag.pubads().addEventListener("impressionViewable",ut),googletag.pubads().addEventListener("slotRenderEnded",pt),googletag.pubads().addEventListener("slotVisibilityChanged",gt),googletag.pubads().addEventListener("slotRequested",ft)})),window.LUX.addData("ad-refresh-enabled",1),z("Refresh | Ad Refresh is enabled for the site",{msg:{refreshTimer:r}})})(),(e=>{const t=[];if(e?.sentiment){const n=`sentiment-${e.sentiment}`;t.push(n)}if(e?.emotion){const n=zn(e.emotion,"level",!1);t.push(n)}if(e?.ratings){const r=(n=e.ratings)?Object.keys(n).reduce(((e,t)=>[...e,`${n[t].customer}-${n[t].rating}`]),[]).join(","):null;t.push(r)}var n;googletag.cmd.push((()=>{t.length&&googletag.pubads().setTargeting("mantis",t)})),e?.categories.mantis&&googletag.pubads().setTargeting("mantis_context",zn(e.categories.mantis,"label",!0))})(e?.mantis),(e=>{googletag.pubads().setTargeting("deviceType",we()),e?.targets&&Object.entries(e?.targets).forEach((([e,t])=>{googletag.pubads().setTargeting(e,t)}))})(e),(()=>{let e=null,t=0;const n=[],r={},i=e=>{n.includes(e)||(n.push(e),h(e))},o=e=>{r[e]=r[e]?r[e]+1:1};googletag.pubads().addEventListener("slotRequested",(t=>{o(t.slot.getSlotElementId()),e||(e=t.slot.getSlotElementId(),i("time-to-first-ad-request"),y("ad-manager-load-to-first-ad-request","time-to-ad-manager-loaded","time-to-first-ad-request"),Te()&&y("cmp-to-first-ad-request","time-to-cmp","time-to-first-ad-request"))})),googletag.pubads().addEventListener("slotResponseReceived",(t=>{const n=t.slot.getSlotElementId();null!==t.slot.getResponseInformation()?o(n):delete r[n],e===n&&(i("ad-response-time-end"),y("ad-response-time","time-to-first-ad-request"))})),googletag.pubads().addEventListener("slotOnload",(a=>{const s=a.slot.getSlotElementId(),l=Object.keys(r).length;var d;i("time-to-first-ad-display"),Te()&&(d="cmp-to-first-ad-display",n.includes(d)||(n.push(d),y(d,"time-to-cmp","time-to-first-ad-display"))),t<l&&(i(`time-to-render-${s}`),t+=1),((e,n)=>t===n&&2===r[e])(s,l)&&(i("time-to-last-ad-render"),y("ads-rendering-time","ad-response-time-end"),o(s),(e=>{const t=document.querySelectorAll("\n  [id*='--inline-'] > div > iframe\n  ").length;window.LUX.addData("injected-ad-count",t),window.LUX.addData("ad-count",e)})(t)),e===s&&(i("ad-render-time-end"),y("ad-render-time","ad-response-time-end"),y("ad-display-time","time-to-first-ad-request"))})),googletag.pubads().addEventListener("impressionViewable",(()=>{i("time-to-first-ad-impression")}))})(),window.LUX?((()=>{const e=Ee();window.LUX.addData("permutive-segments",e.length)})(),(()=>{const e=k("prebid"),t=k("lazyRendering"),n=N("refresh",we());void 0!==n?.enabled&&window.LUX.addData("ad-refresh",n?.enabled),void 0!==n?.refreshTimer&&window.LUX.addData("ad-refresh-duration-in-view",n?.refreshTimer),void 0!==e?.timeout&&window.LUX.addData("header-bidding-timeout",e?.timeout),void 0!==t?.enabled&&window.LUX.addData("ads-lazy-loading",t?.enabled)})(),window.addEventListener(ye,(()=>{window.LUX.addData("prebid-timeout",!0)}))):L.warn(`Could not add SpeedCurve LUX data as window.LUX is ${window.LUX}`),(()=>{const e=new MutationObserver((e=>{const t=new Set;for(const{removedNodes:n}of e)for(const e of n)hr(e).forEach((e=>{t.add(e)}));[...t].forEach((e=>{const t=Le(e.id);if(t){z("Destroying ad slot that was removed from the DOM",{slot:t});const{key:n,index:r}=lt(e.id);(e=>{zt=zt.filter((t=>!(t.key===e.key&&t.index?.toString()===e.index?.toString())))})({key:n,index:r}),googletag.destroySlots([t]),window.pbjs?.[`adserverCalled-${e.id}`]&&(window.pbjs[`adserverCalled-${e.id}`]=!1)}}))})),t=document.body;e.observe(t,{attributes:!0,childList:!0,subtree:!0})})(),(()=>{if(t=window.location.search,/[?&]advert_preview=/.test(t)){const t=(e="advert_preview",new URLSearchParams(window.location.search).get(e));window.googletag.cmd.push((()=>{window.googletag.pubads().setTargeting("advertPreview",t)}))}var e,t})(),!V(window.location.search))return;z("Debug mode enabled");const t=e.targets?.subcat;if(!t)return void L.warn("Debug | Stitch debug could not be loaded");const n=mn(e);"recipe"===t?(e=>{const t=((e,t)=>{const{mpu2Lvl1:n,mpu2Lvl2:r,mpu2Lvl3:i,mpu3:o}=t;let a,s;return e<=3&&(a=n),e>=4&&e<=6&&(a=r),e>=7&&(a=i,s=i+o),{mpu2CharLimit:a,...s&&{mpu3CharLimit:s}}})(document.querySelector(".ingredients-list").querySelectorAll("li").length,e.charLimits),n=rr("recipe"),r=cn("recipe");lr([{label:"MPU2 char limit",value:t.mpu2CharLimit},{label:"MPU3 char limit",value:t.mpu3CharLimit||"N.A."},{label:"DAI Lazy Load",value:100*r+"%"}]),((e,t)=>{let n=e.mpu2CharLimit,r=0;setTimeout((()=>{[...t].every((t=>{const i=Vn(t);if(n<=i){const o=n;if(pr(t,o,!0),n=e.mpu3CharLimit,r+=1,2===r)return!1;const a=i-o;if(n<=a)return pr(t,n+o,!0),!1;n-=a}else n>i&&(n-=i);return!0}))}),5e3)})(t,n);const i=Qn();cr(n,[],[],i)})({charLimits:n}):"list"===t?((e,{cardSpacing:t})=>{const n=cn(e),r=Zn(".dynamic-list__list-item"),i=Wn(r,t);lr([{label:"Page Type",value:e},{label:"Card spacing",value:t},{label:"DAI Lazy Load",value:100*n+"%"},{label:"Injected Ad Count",value:`${i}`}]),setTimeout((()=>{[...document.querySelectorAll(".ad-placement")].every((e=>{const t=document.createElement("div");return t.setAttribute("class","list-limit-marker"),t.innerHTML="<span><strong>DAI Limit Reached</strong></span>",e.appendChild(t),e.setAttribute("style","position: relative;"),!0}))}),1e3)})(t,{cardSpacing:n?.cardSpacing}):"search"===t?((e,{gridCardSpacing:t,listCardSpacing:n})=>{const r=cn(e),i=Zn("div[data-stitcher-dai-content]"),o="list"===document.querySelector("div[data-stitcher-dai-container]").getAttribute("data-stitcher-dai-container")?n:t,a=Wn(i,o);lr([{label:"Page Type",value:e},{label:"Card spacing",value:o},{label:"DAI Lazy Load",value:100*r+"%"},{label:"Injected Ad Count",value:`${a}`}])})(t,{listCardSpacing:n?.listCardSpacing,gridCardSpacing:n?.gridCardSpacing}):mr(t,{charLimits:n,adsNumber:n?.maxAds})}))},_r=e=>{const t=[...document.querySelectorAll(".dfp-ad")].map(ve);return[...zt.map(De(e)),...t]},Rr=()=>{h("time-to-consentWrapped"),vr(),be((()=>{h("time-to-consentWrapped-onInteractive"),googletag.cmd.push((()=>{(()=>{if(window.permutive&&!googletag.pubads().getTargeting("permutive").length){const e=localStorage.getItem("_pdfps")||"";googletag.pubads().setTargeting("permutive",e?JSON.parse(e):[])}})()})),W(wr,((e,t)=>{if(h("time-to-consentWrapped-onInteractive-awaitGlobalSettings"),e)return void L.error(`Consent Wrapped | Required Global Settings could not be found,\n        {error: ${e.message}}`);const n=t.targets.subcat,r=(e=>_r(e).filter((e=>e?.sizes?.length)).filter(Gt))(n);(e=>{e.filter((e=>e?.sizes?.length)).forEach((e=>{if(Gt(e))return;const t=document.getElementById(e.id);t&&(t.style.display="none")}))})(_r(n)),st(r),((e=!0)=>{Vt=e})()}))}))};be(Ht(Gn)),(()=>{const e=window?.IM?.advertising?.init;if(e)return void z("Ad package is already initialised, exiting...");const{disableAllAdvertising:t}=K()?.stitcher||!1;var n;U("disableAllAdvertising",t),U("init",!0),t?L.info("IM Stitcher Disable All Advertising | Early Return In Init"):(h("time-to-ad-manager-started"),googletag.cmd.push((()=>{h("time-to-gpt-started"),Te()&&y("cmp-to-gpt-started","time-to-cmp","time-to-gpt-started"),googletag.pubads().disableInitialLoad(),googletag.pubads().enableSingleRequest(),googletag.pubads().enableAsyncRendering(),be((()=>{h("time-to-gpt-onInteractive"),W(wr,((e,t)=>{h("time-to-gpt-onInteractive-awaitGlobalSettings"),e?L.error(`onInteractive: Required Global Settings could not be found',\n          {error: ${e.message}}`):Ir(t)}))}))})),h("time-to-init-waitForConsent"),n=()=>{(async e=>{try{const t=Object.keys(localStorage).find((e=>e.startsWith("_sp_user_consent_"))),n=JSON.parse(localStorage.getItem(t)),{hasConsentData:r}=n?.gdpr?.consentStatus;r&&((({consentString:e,gdprStatus:t})=>{if(!(()=>{const e="FullReach";return ae()?(oe({service:e,state:"disabled",message:"FullReach is not allowed to run, URL is in exclusion list",data:{currentPath:window.location.pathname}}),!1):ie.FULLREACH_CUSTOMERID?ie.FULLREACH_ENABLED?(oe({service:e,state:"enabled",message:"FullReach is initiated, config is valid & enabled",data:{currentPath:window.location.pathname,fullReachEnabled:ie.FULLREACH_ENABLED}}),!0):(oe({service:e,state:"disabled",message:"FullReach is not initiated, FULLREACH_ENABLED is not enabled in Stitcher Admin",data:{fullReachEnabled:ie.FULLREACH_ENABLED}}),!1):(oe({service:e,state:"disabled",message:"FullReach is not initiated, FULLREACH_CUSTOMERID is not set in Stitcher Admin",data:{fullReachEnabled:ie.FULLREACH_ENABLED}}),!1)})())return!1;if(!e||"string"!=typeof e)return oe({service:"FullReach",state:"disabled",message:"FullReach does not have a valid consent string"}),!1;h(fe.INIT);const n={allowStorageAccess:!1,cacheType:"",consentString:e,gdprApplies:!!t||null,waitForCmpConsent:!0};h(fe.API_REQUESTED),ue(ge,n).promise().then(me).catch(he);const r={...n,consentString:"Redacted for logging"};oe({service:"FullReach",state:"enabled",message:"FullReach has sent request to fetch AP data with options",data:r})})({consentString:n?.gdpr?.euconsent,gdprStatus:n?.gdpr?.applies}),window.LUX.addData("sp_consent_retrieved",!0),googletag.cmd.push((()=>{googletag.pubads().setPrivacySettings({nonPersonalizedAds:!e&&!!k("manageConsentlessInventory")?.npa})})),"function"==typeof window.pbjs.setConfig?window.pbjs.setConfig({deviceAccess:e}):L.warn("Prebid | pbDD_window.pbjs not defined"),window.LUX.addData("pb_defined","function"==typeof window.pbjs.setConfig),performance.mark(`Consent given was ${e}, ads will be personalised if its true`),Rr())}catch(e){L.info("Consent based ads | Error in retrieving value from SourcePoint, unable to determine"),Rr()}})(m([1,2,3,4,7,9,10])),(async()=>{try{if(!await s())return;const e="{}"===d();googletag.cmd.push((()=>{googletag.pubads().setTargeting("consent",`${!e}`)}))}catch(e){const t=d(),n=await s();L.info("Consent targeting | Error setting page-level consent kvp",{error:e.message,logHasConsentData:n,logConsentStatus:t})}})(),(async()=>{const e=await s();try{if(!e)return L.error("Consentless Inventory | Cannot retreive Consent Data",{hasConsented:e}),void window.LUX.addData("consent-data-undefined",1);const t=m([1,2,3,4,5,6,7,8,9,10,11]);mt()&&!1===t&&(L.info("Consentless Inventory | Destroyed Google Ad Slots"),window.LUX.addData("consentless_inventory_mode",!0),googletag.cmd.push((()=>{googletag.destroySlots()})),L.info("Consentless Inventory | Ready for consentless inventory to be loaded"))}catch(t){const n=d();L.error("Consentless Inventory | Error setting Consentless Inventory Mode",{error:t.message,hasConsented:e,consentPuposesGranted:n})}})()},window.performance.mark("time-to-waitForConsentChange-init"),window.__tcfapi("addEventListener",2,(function(){n(),window.performance.mark("time-to-waitForConsentChange-callback"),window.performance.measure("time-to-waitForConsentChange-init","time-to-waitForConsentChange-callback")})))})()})()})();
//# sourceMappingURL=adManager-a3bb2f3300c242e72f5e.js.map